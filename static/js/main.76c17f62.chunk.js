(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{22:function(e,n,o){e.exports={title:"HeldBlock_title__-UOyq",heldBlockOuter:"HeldBlock_heldBlockOuter__1Xhyv",grid:"HeldBlock_grid__rrQf0",gridRow:"HeldBlock_gridRow__2llk9"}},23:function(e,n,o){e.exports={pieceQueue:"PieceQueue_pieceQueue___hxZt",piece:"PieceQueue_piece__NTkk0",pieceRow:"PieceQueue_pieceRow__1CaEL"}},29:function(e,n,o){e.exports={pieceQueue:"PieceQueue_pieceQueue__N5gJS",piece:"PieceQueue_piece__1nqbS",pieceRow:"PieceQueue_pieceRow__2ZzqI"}},33:function(e,n,o){e.exports={stopWatch:"StopWatch_stopWatch__2hbXZ"}},37:function(e,n,o){e.exports={backdrop:"Modal_backdrop__2znzX",modal:"Modal_modal__2QgxK"}},38:function(e,n,o){e.exports={block:"Block_block__1kjjl",None:"Block_None__ltR1S",I:"Block_I__1Pnys",T:"Block_T__WdEBm",L:"Block_L__1zsbc",J:"Block_J__2iV29",Z:"Block_Z__28EjD",S:"Block_S__MKS_j",O:"Block_O__3X5pc",Ighost:"Block_Ighost__1pBKL",Tghost:"Block_Tghost__2h680",Lghost:"Block_Lghost__3KiXo",Jghost:"Block_Jghost__9BTwX",Zghost:"Block_Zghost__3ytmC",Sghost:"Block_Sghost__1z9Pj",Oghost:"Block_Oghost__34NVA"}},40:function(e,n,o){e.exports={block:"Block_block__7hl6T",None:"Block_None__2PHRA",I:"Block_I__2hPz5",T:"Block_T__1zbV7",L:"Block_L__vPAnW",J:"Block_J__1lt8I",Z:"Block_Z__2BuFD",S:"Block_S__36R4_",O:"Block_O__1LvhJ",Ighost:"Block_Ighost__lbI0G",Tghost:"Block_Tghost__3-N71",Lghost:"Block_Lghost__2imGj",Jghost:"Block_Jghost__3QcrR",Zghost:"Block_Zghost__eEqpK",Sghost:"Block_Sghost__2Fbny",Oghost:"Block_Oghost__1cvVz"}},41:function(e,n,o){e.exports={readyGo:"ReadyGo_readyGo__3i4cO"}},42:function(e,n,o){e.exports={counterOpponent:"LineClearedCounter_counterOpponent__3bjI0",counterMyself:"LineClearedCounter_counterMyself__2Fnqt"}},48:function(e,n,o){e.exports={grid:"Grid_grid__9Fsru"}},49:function(e,n,o){e.exports={readyGo:"ReadyGo_readyGo__18l16"}},50:function(e,n,o){e.exports={howToPlay:"HowToPlay_howToPlay__2-hPX"}},51:function(e,n,o){e.exports={card:"Card_card__2N-0v"}},52:function(e,n,o){e.exports={grid:"Grid_grid__3hTgC"}},53:function(e,n,o){e.exports={"nav-bar":"NavigationBar_nav-bar__WRYyO"}},66:function(e,n,o){},68:function(e,n,o){"use strict";o.r(n);var t=o(44),r=o.n(t),N=o(9),c=(o(66),o(13)),a=o(25),s=o(7),i=o(8),u=o.n(i),l=o(20),d=Object(l.b)({name:"controls",initialState:{newGame:"Escape",moveLeft:"ArrowLeft",moveRight:"ArrowRight",softDrop:"ArrowDown",hardDrop:" ",rotateLeft:"z",rotateRight:"ArrowUp",hold:"c"},reducers:{resetDefault:function(e){e.newGame="Escape",e.moveLeft="ArrowLeft",e.moveRight="ArrowRight",e.softDrop="ArrowDown",e.hardDrop=" ",e.rotateLeft="z",e.rotateRight="ArrowUp",e.hold="c"},resetAlbert:function(e){e.newGame="Escape",e.moveLeft="ArrowLeft",e.moveRight="ArrowRight",e.softDrop="ArrowDown",e.hardDrop=" ",e.rotateLeft="q",e.rotateRight="w",e.hold="Tab"},setNewControls:function(e,n){e.newGame=n.payload.newGame,e.moveLeft=n.payload.moveLeft,e.moveRight=n.payload.moveRight,e.softDrop=n.payload.softDrop,e.hardDrop=n.payload.hardDrop,e.rotateLeft=n.payload.rotateLeft,e.rotateRight=n.payload.rotateRight,e.hold=n.payload.hold}}}),j=d.actions,f=d.reducer,b=o(24),p=o(37),h=o.n(p),O=o(2),m=function(e){return Object(O.jsx)("div",{className:h.a.backdrop,onClick:e.onClick})},y=function(e){var n=e.children;return Object(O.jsx)("div",{className:h.a.modal,children:n})},g=function(e){var n=document.getElementById("overlays");return Object(O.jsxs)(i.Fragment,{children:[Object(b.createPortal)(Object(O.jsx)(m,{onClick:e.onClick}),n),Object(b.createPortal)(Object(O.jsx)(y,{children:e.children}),n)]})},v=function(e){var n=e.controlName,o=e.input,t=e.setInput,r=e.currentKey,N=Object(i.useState)(!1),a=Object(c.a)(N,2),s=a[0],u=a[1];Object(i.useEffect)((function(){document.onkeydown=function(e){s&&t(e.key)}}),[s]);var l=o;return" "===l&&(l="space"),Object(i.useEffect)((function(){t(r)}),[r]),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{id:n,children:"".concat(n," ")}),Object(O.jsx)("input",{onChange:function(e){1===e.target.value.length&&e.target.blur()},onFocus:function(e){t(""),u(!0)},onBlur:function(e){""===e.target.value&&t(r),u(!1)},id:n,value:l})]})},x=function(e){var n=e.setShowKeyBindings,o=Object(N.b)(),t=Object(N.c)((function(e){return e.controls})),r=Object(i.useState)(t.newGame),a=Object(c.a)(r,2),s=a[0],u=a[1],l=Object(i.useState)(t.rotateRight),d=Object(c.a)(l,2),f=d[0],b=d[1],p=Object(i.useState)(t.rotateLeft),h=Object(c.a)(p,2),m=h[0],y=h[1],x=Object(i.useState)(t.hold),P=Object(c.a)(x,2),C=P[0],S=P[1],_=Object(i.useState)(t.hardDrop),L=Object(c.a)(_,2),w=L[0],k=L[1],R=Object(i.useState)(t.softDrop),G=Object(c.a)(R,2),I=G[0],T=G[1],D=Object(i.useState)(t.moveLeft),E=Object(c.a)(D,2),B=E[0],A=E[1],M=Object(i.useState)(t.moveRight),K=Object(c.a)(M,2),F=K[0],U=K[1];return Object(O.jsxs)(g,{onClick:function(){n(!1)},children:[Object(O.jsx)("button",{onClick:function(){n(!1)},style:{float:"right"},children:"x"}),Object(O.jsx)(v,{controlName:"newGame",currentKey:t.newGame,input:s,setInput:u}),Object(O.jsx)(v,{currentKey:t.rotateRight,controlName:"rotateRight",input:f,setInput:b}),Object(O.jsx)(v,{currentKey:t.rotateLeft,controlName:"rotateLeft",input:m,setInput:y}),Object(O.jsx)(v,{currentKey:t.hold,controlName:"hold",input:C,setInput:S}),Object(O.jsx)(v,{currentKey:t.hardDrop,controlName:"hardDrop",input:w,setInput:k}),Object(O.jsx)(v,{currentKey:t.softDrop,controlName:"softDrop",input:I,setInput:T}),Object(O.jsx)(v,{currentKey:t.moveLeft,controlName:"moveLeft",input:B,setInput:A}),Object(O.jsx)(v,{currentKey:t.moveRight,controlName:"moveRight",input:F,setInput:U}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){o(j.resetDefault())},children:"Default"}),Object(O.jsx)("button",{onClick:function(){o(j.resetAlbert())},children:"Albert"}),Object(O.jsx)("button",{onClick:function(){o(j.setNewControls({newGame:s,rotateRight:f,rotateLeft:m,hardDrop:w,softDrop:I,moveLeft:B,moveRight:F,hold:C}))},children:"Save"})]})]})},P=Object(i.memo)(x),C=o(0),S=o(3),_=o(47),L=(Object(_.a)({apiKey:"AIzaSyA9ipNK6_boqbwThQlJgolni-O5iIgIl40",authDomain:"ditris-2244c.firebaseapp.com",databaseURL:"https://ditris-2244c-default-rtdb.firebaseio.com",projectId:"ditris-2244c",storageBucket:"ditris-2244c.appspot.com",messagingSenderId:"743373731037",appId:"1:743373731037:web:9552a80db8b0df8d875734"}),Object(a.a)()),w=Object(s.c)(),k=Object(s.j)(w),R=Object(s.a)(k,"users"),G=Object(s.a)(k,"rooms"),I=function(){var e=Object(S.a)(Object(C.a)().mark((function e(n){var o;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.b)(Object(s.a)(R,n)).then((function(e){o=e.val().username}));case 2:return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=o(14),D=o(10),E={I:[[[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],T:[[[0,1,0],[1,1,1]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],L:[[[0,0,1],[1,1,1]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],J:[[[1,0,0],[1,1,1]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],S:[[[0,1,1],[1,1,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],O:[[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]]]},B=o(5),A=o(6),M=function(){function e(){Object(B.a)(this,e),this.elements={},this.head=0,this.tail=0}return Object(A.a)(e,[{key:"enqueue",value:function(e){this.elements[this.tail]=e,this.tail++}},{key:"dequeue",value:function(){var e=this.elements[this.head];return delete this.elements[this.head],this.head++,e}},{key:"peek",value:function(){return this.elements[this.head]}},{key:"empty",value:function(){for(;!this.isEmpty;)this.dequeue()}},{key:"length",get:function(){return this.tail-this.head}},{key:"isEmpty",get:function(){return 0===this.length}}]),e}(),K=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],F=function(){0===K.length&&(K=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"]);var e=Math.floor(K.length*Math.random());return K.splice(e,1)},U=function(e,n,o,t){return E[e][n].map((function(e,n){return e.map((function(e,r){return e?{x:o+r,y:t+n}:null}))}))},Q=function(e,n){var o,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],N=Object(D.a)(n);try{for(N.s();!(o=N.n()).done;){var c,a=o.value,s=Object(D.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i&&W(e,i,t)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){N.e(u)}finally{N.f()}return r},Z=function(e){var n,o=Object(D.a)(e.currentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}},J=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.grid.map((function(e){return e.slice()}));if(n){var t,r=e.currentShape+"ghost",N=Object(D.a)(e.ghostCoords);try{for(N.s();!(t=N.n()).done;){var c=t.value;o[c.y][c.x]=r;var a,s=Object(D.a)(e.currentCoords);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.y===c.y&&i.x===c.x&&(o[c.y][c.x]=e.currentShape)}}catch(j){s.e(j)}finally{s.f()}}}catch(j){N.e(j)}finally{N.f()}}else{var u,l=Object(D.a)(e.currentCoords);try{for(l.s();!(u=l.n()).done;){var d=u.value;o[d.y][d.x]=e.currentShape}}catch(j){l.e(j)}finally{l.f()}}e.grid=o},W=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&n.y<=20&&n.x>=0&&n.x<=9){var t,r=Object(D.a)(e.currentCoords);try{for(r.s();!(t=r.n()).done;){var N=t.value;if(o&&N.y===n.y&&N.x===n.x)return!0}}catch(c){r.e(c)}finally{r.f()}if(e.grid[n.y][n.x].length>1)return!0}return!1},q=new M,H=Object(l.b)({name:"gameState",initialState:{gameRunning:!1,currentShape:null,currentCoords:[],ghostCoords:[],currentPieceState:"NONE",rotatePos:0,xPos:3,yPos:0,totalLinesCleared:0,grid:[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],pieceQueue:null,isGameWon:!1,heldPiece:null,rotated:!1,displayMessage:null},reducers:{reset:function(e){K=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.xPos=3,e.yPos=0,e.rotatePos=0,e.totalLinesCleared=0,e.displayMessage=null,e.rotated=!1,e.heldPiece=null,e.currentPieceState="GETTING READY",q.empty(),e.gameRunning=!1},newGame:function(e){K=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.xPos=3,e.yPos=0,e.rotatePos=0,e.totalLinesCleared=0,e.rotated=!1,e.heldPiece=null,e.displayMessage="READY",e.currentPieceState="GETTING READY",q.empty(),e.gameRunning=!1},gettingReady:function(e){if("GETTING READY"===e.currentPieceState)e.currentPieceState="BEFORE START",e.displayMessage="GO!";else if("BEFORE START"===e.currentPieceState){e.displayMessage=null,e.gameRunning=!0,e.currentShape=F()[0];for(var n=0;n<5;n++)q.enqueue.apply(q,Object(T.a)(F()))}},clearLines:function(e){var n,o=[],t=0,r=Object(D.a)(e.grid);try{for(r.s();!(n=r.n()).done;){var N=n.value;N.every((function(e){return"None"!==e}))?(e.totalLinesCleared+=1,t+=1):o.push(N)}}catch(a){r.e(a)}finally{r.f()}for(var c=0;c<t;c++)o.unshift(["None","None","None","None","None","None","None","None","None","None"]);e.grid=o},getNewPiece:function(e){if(e.gameRunning){if(e.ghostCoords=[],e.rotated=!1,e.currentShape=q.dequeue(),q.enqueue.apply(q,Object(T.a)(F())),e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4)return e.gameRunning=!1,e.displayMessage="YOU LOST",void console.log("lost");J(e),e.currentPieceState="FALLING"}},rotatePiece:function(e,n){var o=e.rotatePos;e.rotatePos=function(e,n){var o=n.rotatePos;return e?0===o?3:o-1:3===o?0:o+1}(n.payload,{rotatePos:e.rotatePos}),Z(e),e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.rotatePos=o,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentPieceState="FALLING",J(e)},dropPiece:function(e){if(e.gameRunning){if("LANDING"===e.currentPieceState)return void(e.currentPieceState="FROZEN");if("FROZEN"===e.currentPieceState)return;Z(e),e.yPos+=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.yPos-=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentPieceState="LANDING"):e.currentPieceState="FALLING",J(e)}},getGhostCoords:function(e){if(e.gameRunning){!function(e){var n,o=Object(D.a)(e.ghostCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}}(e),e.ghostCoords=[];var n,o=Object(D.a)(e.currentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.ghostCoords.push({x:t.x,y:t.y})}}catch(N){o.e(N)}finally{o.f()}for(var r=e.yPos;4===e.ghostCoords.length;)r+=1,e.ghostCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,r),!0);r-=1,e.ghostCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,r),!0)}},hardDrop:function(e){Z(e),e.currentCoords=e.ghostCoords,J(e),e.currentPieceState="FROZEN"},showGhostPiece:function(e){e.gameRunning&&J(e,!0)},shiftLeft:function(e){Z(e),e.xPos-=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.xPos+=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentPieceState="FALLING",J(e)},shiftRight:function(e){Z(e),e.xPos+=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.xPos-=1,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentPieceState="FALLING",J(e)},checkIfGameWon:function(e){e.totalLinesCleared>=4&&(console.log("won"),e.isGameWon=!0,e.gameRunning=!1,e.displayMessage="YOU WON")},holdPiece:function(e){if(!0!==e.rotated){if(e.rotated=!0,Z(e),null===e.heldPiece)e.heldPiece=e.currentShape,e.currentShape=q.dequeue(),q.enqueue.apply(q,Object(T.a)(F()));else{var n=e.currentShape;e.currentShape=e.heldPiece,e.heldPiece=n}e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=Q(e,U(e.currentShape,e.rotatePos,e.xPos,e.yPos)),J(e),e.currentPieceState="FALLING"}}}}),z=H.actions,Y=H.reducer,X=o(48),V=o.n(X),$=o(38),ee=o.n($),ne=function(e){var n=e.color;return Object(O.jsx)("div",{className:"".concat(ee.a.block,"  ").concat(ee.a[n])})},oe=o(49),te=o.n(oe),re=function(){var e=Object(N.c)((function(e){return e.gameState}));return Object(O.jsx)("div",{className:te.a.readyGo,children:e.displayMessage})},Ne=function(){var e=Object(N.c)((function(e){return e.gameState})).grid.slice(1).map((function(e,n){return Object(O.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(O.jsx)(ne,{color:e},n)}))},n)}));return Object(O.jsxs)("div",{className:V.a.grid,children:[e,Object(O.jsx)(re,{})]})},ce=o(29),ae=o.n(ce),se=function(e){var n=E[e.color][0].map((function(n,o){return Object(O.jsx)("div",{className:ae.a.pieceRow,children:n.map((function(n,o){return 0===n?Object(O.jsx)(ne,{color:null},o):Object(O.jsx)(ne,{color:e.color},o)}))},o)}));return Object(O.jsx)("div",{className:ae.a.piece,children:n})},ie=function(e){Object(N.c)((function(e){return e.gameState.heldPiece}));var n=0,o=[];if(q.isEmpty)return Object(O.jsx)("div",{className:ae.a.pieceQueue});for(var t in q.elements)o.push(Object(O.jsx)(se,{color:q.elements[t]},n++));return Object(O.jsx)("div",{className:ae.a.pieceQueue,children:o})},ue=o(22),le=o.n(ue),de=function(){var e=Object(N.c)((function(e){return e.gameState}));if(!e.heldPiece)return Object(O.jsxs)("div",{className:le.a.heldBlockOuter,children:[Object(O.jsx)("div",{className:le.a.title,children:"Held Piece"}),Object(O.jsxs)("div",{className:le.a.gridRow,children:[Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{})]}),Object(O.jsxs)("div",{className:le.a.gridRow,children:[Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{})]}),Object(O.jsxs)("div",{className:le.a.gridRow,children:[Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(ne,{})]})]});var n=E[e.heldPiece][0].map((function(n,o){return Object(O.jsx)("div",{style:{display:"flex"},children:n.map((function(n,o){return 0===n?Object(O.jsx)(ne,{color:null},o):Object(O.jsx)(ne,{color:e.heldPiece},o)}))},o)}));return Object(O.jsx)(i.Fragment,{children:Object(O.jsxs)("div",{className:le.a.heldBlockOuter,children:[Object(O.jsx)("div",{className:le.a.title,children:"Held Piece"}),Object(O.jsx)("div",{className:le.a.grid,children:n})]})})},je={},fe={},be={},pe=function(){window.addEventListener("keydown",(function(e){je[e.key]=!0,"Tab"===e.key&&(e.preventDefault(),e.stopPropagation())," "===e.key&&(e.preventDefault(),e.stopPropagation()),"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation()),"ArrowUp"===e.key&&(e.preventDefault(),e.stopPropagation())})),window.addEventListener("keyup",(function(e){be[e.key]=0,je[e.key]=!1,fe[e.key]=!1}))},he=(o(50),o(33)),Oe=o.n(he),me=function(){var e=Object(N.c)((function(e){return e.gameState.gameRunning})),n=Object(i.useState)(0),o=Object(c.a)(n,2),t=o[0],r=o[1],a=Object(i.useState)(0),s=Object(c.a)(a,2),u=s[0],l=s[1],d=Object(i.useState)(0),j=Object(c.a)(d,2),f=j[0],b=j[1];return Object(i.useEffect)((function(){var n=null;return e&&(r((function(){return 0})),l((function(){return 0})),b((function(){return 0})),n=setInterval((function(){r((function(e){return e+1}))}),100)),function(){clearInterval(n)}}),[e]),10===t&&(l(u+1),r(0)),60===u&&(b(f+1),l(0)),f?Object(O.jsx)("div",{className:Oe.a.stopWatch,children:"Time ".concat(f,":").concat(u,":").concat(t)}):u?Object(O.jsx)("div",{className:Oe.a.stopWatch,children:"Time ".concat(u,":").concat(t)}):t?Object(O.jsx)("div",{className:Oe.a.stopWatch,children:"Time 0:".concat(t)}):void 0},ye=!1,ge=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.gameState.gameRunning})),o=Object(N.c)((function(e){return e.gameState.currentPieceState})),t=Object(N.c)((function(e){return e.gameState.displayMessage})),r=Object(N.c)((function(e){return e.controls})),a=Object(i.useState)(!1),s=Object(c.a)(a,2),u=s[0],l=s[1];Object(i.useEffect)((function(){var t=window.setInterval((function(){n&&("FROZEN"===o?(e(z.clearLines()),e(z.checkIfGameWon()),e(z.getNewPiece()),e(z.getGhostCoords()),e(z.showGhostPiece())):(e(z.dropPiece()),e(z.getGhostCoords()),e(z.showGhostPiece())))}),300),r=window.setInterval((function(){j()}),1),N=window.setInterval((function(){d()}),1);return function(){window.clearInterval(t),window.clearInterval(r),window.clearInterval(N)}})),Object(i.useEffect)((function(){if(u){var n=window.setInterval((function(){e(z.gettingReady())}),500);return function(){window.clearInterval(n)}}}),[t,e,u]);var d=function(){if(n&&!ye){for(var o in be)be[o]&&(be[o]+=1);je[r.softDrop]&&fe[r.softDrop]&&be[r.softDrop]>40&&(e(z.dropPiece()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.softDrop]=!0,be[r.softDrop]=30),je[r.moveRight]&&fe[r.moveRight]&&be[r.moveRight]>40&&(e(z.shiftRight()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.moveRight]=!0,be[r.moveRight]=30),je[r.moveLeft]&&fe[r.moveLeft]&&be[r.moveLeft]>40&&(e(z.shiftLeft()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.moveLeft]=!0,be[r.moveLeft]=30)}},j=function(){n&&!ye&&(je[r.rotateLeft]&&!fe[r.rotateLeft]&&(e(z.rotatePiece(!0)),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.rotateLeft]=!0),je[r.rotateRight]&&!fe[r.rotateRight]&&(e(z.rotatePiece(!1)),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.rotateRight]=!0),je[r.hardDrop]&&!fe[r.hardDrop]&&(ye=!0,e(z.hardDrop()),fe[r.hardDrop]=!0,setTimeout((function(){ye=!1}),350)),je[r.hold]&&!fe[r.hold]&&(e(z.holdPiece()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.hold]=!0),je[r.softDrop]&&!fe[r.softDrop]&&(be[r.softDrop]=1,e(z.dropPiece()),fe[r.softDrop]=!0),je[r.moveRight]&&!fe[r.moveRight]&&(be[r.moveRight]=1,e(z.shiftRight()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.moveRight]=!0),je[r.moveLeft]&&!fe[r.moveLeft]&&(be[r.moveLeft]=1,e(z.shiftLeft()),e(z.getGhostCoords()),e(z.showGhostPiece()),fe[r.moveLeft]=!0))};return document.onkeydown=function(n){n.key===r.newGame&&(l(!0),e(z.newGame()),e(z.getGhostCoords()),e(z.showGhostPiece()))},Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)(pe,{}),Object(O.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",justifyContent:"center"},children:[Object(O.jsx)(de,{}),Object(O.jsx)(Ne,{}),Object(O.jsx)(ie,{})]}),Object(O.jsx)(me,{})]})},ve=function(){return Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)("h1",{children:"Ditris"}),Object(O.jsx)(ge,{})]})},xe=o(39),Pe=o(21),Ce=function(){var e=Object(N.c)((function(e){return e.userInfo.isLoggedIn})),n=Object(i.useState)(!1),o=Object(c.a)(n,2),t=o[0],r=o[1],a=Object(i.useState)(""),s=Object(c.a)(a,2),u=s[0],l=s[1],d=Object(i.useState)(!1),j=Object(c.a)(d,2),f=j[0],b=j[1],p=function(){var e=Object(S.a)(Object(C.a)().mark((function e(n){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!==u.trim().length){e.next=5;break}b(!0),e.next=11;break;case 5:return e.next=7,Object(xe.a)(L);case 7:Object(Pe.e)(Object(Pe.a)(R,L.currentUser.uid),{username:u,inRoom:!1}),l(""),r(!1),b(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=Object(S.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Pe.d)(Object(Pe.a)(R,L.currentUser.uid)),Object(xe.b)(L);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(O.jsx)("p",{children:"Invalid Username"});return e?Object(O.jsx)("button",{onClick:h,children:"Logout"}):Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){r(!0)},children:"Login"}),t&&Object(O.jsx)(g,{onClick:function(){r(!1)},children:Object(O.jsxs)("form",{onSubmit:p,children:[Object(O.jsx)("label",{id:"name",children:"Username: "}),Object(O.jsx)("input",{id:"name",value:u,onChange:function(e){l(e.target.value)}}),Object(O.jsx)("button",{children:"Login"}),f&&m]})})]})},Se=Object(i.memo)(Ce),_e=o(51),Le=o.n(_e),we=function(e){if(e.children)return Object(O.jsx)("div",{className:Le.a.card,children:e.children})},ke=null,Re=Object(l.b)({name:"UserInfo",initialState:{isLoggedIn:!1,roomStatus:null,otherUsers:[],roomKey:null,opponentName:"",opponentID:null,invitationKeys:[],grid:[],displayText:""},reducers:{reset:function(e){e.roomStatus="looking for room",e.otherUsers=[],e.roomKey=null,e.opponentName="",e.opponentID=null,e.invitationKeys=[],e.grid=[],e.myName="",ke=null},login:function(e){e.isLoggedIn=!0},logout:function(e){e.isLoggedIn=!1},setOtherUsers:function(e,n){e.otherUsers=n.payload},setRoomKey:function(e,n){e.roomKey=n.payload},setRoomStatus:function(e,n){e.roomStatus=n.payload},setOpponentName:function(e,n){e.opponentName=n.payload},setOpponentid:function(e,n){n.payload&&(ke=Object(s.a)(R,n.payload)),e.opponentID=n.payload},setInvitiationKeys:function(e,n){e.invitationKeys=n.payload},setGrid:function(e,n){e.grid=n},setDisplayText:function(e,n){e.displayText=n.payload}}}),Ge=Re.actions,Ie=Re.reducer,Te=function(e){var n=e.username,o=e.uid,t=Object(N.b)(),r=Object(Pe.c)(G),c=function(){var e=Object(S.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Pe.b)(G),e.next=3,Object(Pe.e)(r,{player1:L.currentUser.uid,player2:o,accepted:!1});case 3:t(Ge.setRoomStatus("waiting")),t(Ge.setRoomKey(r.key)),t(Ge.setOpponentName(n)),t(Ge.setOpponentid(o));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("li",{children:Object(O.jsx)("button",{onClick:c,children:n})})},De=function(){var e=Object(N.c)((function(e){return e.userInfo.otherUsers})),n=e?e.map((function(e,n){return Object(O.jsx)(Te,{username:e[1].username,uid:e[0]},n)})):null;if(n)return Object(O.jsxs)(we,{children:[Object(O.jsx)("div",{children:"Available Users"}),n]})},Ee=Object(i.memo)(De),Be=function(e){var n=e.cancelRoomHandler,o=Object(N.c)((function(e){return e.userInfo.opponentName}));Object(N.c)((function(e){return e.userInfo.roomKey}));return Object(O.jsxs)(g,{children:["Waiting for ",o," to join",Object(O.jsx)("button",{onClick:n,children:"Cancel"})]})},Ae=Object(i.memo)(Be),Me=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],Ke=function(){0===Me.length&&(Me=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"]);var e=Math.floor(Me.length*Math.random());return Me.splice(e,1)},Fe=function(e,n,o,t){return E[e][n].map((function(e,n){return e.map((function(e,r){return e?{x:o+r,y:t+n}:null}))}))},Ue=function(e,n){var o,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],N=Object(D.a)(n);try{for(N.s();!(o=N.n()).done;){var c,a=o.value,s=Object(D.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i&&He(e,i,t)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){N.e(u)}finally{N.f()}return r},Qe={playerNumber:null,gameRunning:!1,myCurrentShape:null,myCurrentCoords:[],myGhostCoords:[],myPieceQueue:null,myHeldPiece:null,myLinesCleared:0,opponentPieceQueue:[],opponentHeldPiece:null,opponentLinesCleared:0,currentGameStatus:"NONE",rotatePos:0,xPos:3,yPos:0,grid:[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],rotated:!1,displayMessage:"",myTurn:null,linesToClear:15,lineDeduction:2,keepTurn:0,keepTurn2:!1,turnTaken:!1},Ze=null,Je=new M,We=function(e){var n,o=Object(D.a)(e.myCurrentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}},qe=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.grid.map((function(e){return e.slice()}));if(n){var t,r=e.myCurrentShape+"ghost",N=Object(D.a)(e.myGhostCoords);try{for(N.s();!(t=N.n()).done;){var c=t.value;o[c.y][c.x]=r;var a,s=Object(D.a)(e.myCurrentCoords);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.y===c.y&&i.x===c.x&&(o[c.y][c.x]=e.myCurrentShape)}}catch(j){s.e(j)}finally{s.f()}}}catch(j){N.e(j)}finally{N.f()}}else{var u,l=Object(D.a)(e.myCurrentCoords);try{for(l.s();!(u=l.n()).done;){var d=u.value;o[d.y][d.x]=e.myCurrentShape}}catch(j){l.e(j)}finally{l.f()}}e.grid=o},He=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&n.y<=20&&n.x>=0&&n.x<=9){var t,r=Object(D.a)(e.myCurrentCoords);try{for(r.s();!(t=r.n()).done;){var N=t.value;if(o&&N.y===n.y&&N.x===n.x)return!0}}catch(c){r.e(c)}finally{r.f()}if(e.grid[n.y][n.x].length>1)return!0}return!1},ze=Object(l.b)({name:"gameState2",initialState:Qe,reducers:{reset:function(e){e.playerNumber=null,e.gameRunning=!1,e.myCurrentShape=null,e.myCurrentCoords=[],e.myGhostCoords=[],e.myPieceQueue=null,e.myHeldPiece=null,e.myLinesCleared=0,e.opponentPieceQueue=[],e.opponentHeldPiece=null,e.opponentLinesCleared=0,e.currentGameStatus="NONE",e.rotatePos=0,e.xPos=3,e.yPos=0,e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.rotated=!1,e.displayMessage="",e.keepTurn=0,e.keepTurn2=!1,e.myTurn=null,e.linesToClear=15,e.lineDeduction=Math.floor(3),Ze=null,Je=new M,e.turnTaken=!1},setGrid:function(e,n){e.grid=n.payload},gettingReady:function(e){e.myCurrentShape=null,e.myCurrentCoords=[],e.myGhostCoords=[],e.myPieceQueue=null,e.myHeldPiece=null,e.myLinesCleared=0,e.currentGameStatus="NONE",e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]]},newGame:function(e){e.xPos=3,e.yPos=0,e.rotatePos=0,Me=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],Je=new M;for(var n=0;n<5;n++){var o;(o=Je).enqueue.apply(o,Object(T.a)(Ke()))}},setOpponentInfo:function(e,n){e.opponentPieceQueue=n.payload.opponentPieceQueue,e.opponentLinesCleared=n.payload.opponentLinesCleared},clearLines:function(e){var n,o=[],t=0,r=Object(D.a)(e.grid);try{for(r.s();!(n=r.n()).done;){var N=n.value;N.every((function(e){return"None"!==e}))?(e.myLinesCleared+=1,t+=1):o.push(N)}}catch(a){r.e(a)}finally{r.f()}for(var c=0;c<t;c++)o.unshift(["None","None","None","None","None","None","None","None","None","None"]);e.grid=o,Object(s.l)(Object(s.a)(Ze,"grid"),e.grid),t>0?(e.keepTurn=e.keepTurn+1,e.keepTurn2=!0):e.keepTurn2=!1},unfreeze:function(e){e.currentGameStatus="FALLING"},getNewPiece:function(e,n){var o,t;(e.myGhostCoords=[],e.myCurrentShape=Je.dequeue(),(o=Je).enqueue.apply(o,Object(T.a)(Ke())),e.xPos=3,e.yPos=0,e.rotatePos=0,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4)&&(e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.myCurrentShape=Je.dequeue(),(t=Je).enqueue.apply(t,Object(T.a)(Ke())),Object(s.d)(Object(s.a)(Ze,"player".concat(1===e.playerNumber?2:1,"GameInfo"))),Object(s.l)(Object(s.a)(Ze,"player".concat(1===e.playerNumber?2:1,"GameInfo/linesCleared")),e.opponentLinesCleared-e.lineDeduction),Object(s.d)(Object(s.a)(Ze,"displayMessage")),e.displayMessage="".concat(n.payload," CAUSED OVERFLOW"),Object(s.l)(Object(s.a)(Ze,"displayMessage"),"".concat(n.payload," CAUSED OVERFLOW")),setTimeout((function(){Object(s.l)(Object(s.a)(Ze,"displayMessage"),"in game")}),1e3),e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)));qe(e),e.currentGameStatus="FALLING"},rotatePiece:function(e,n){var o=e.rotatePos;e.rotatePos=function(e,n){var o=n.rotatePos;return e?0===o?3:o-1:3===o?0:o+1}(n.payload,{rotatePos:e.rotatePos}),We(e),e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.rotatePos=o,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",qe(e)},dropPiece:function(e){if(e.gameRunning){if("LANDING"===e.currentGameStatus)return void(e.currentGameStatus="FROZEN");We(e),e.yPos+=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.yPos-=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.currentGameStatus="LANDING"):e.currentGameStatus="FALLING",qe(e)}},getGhostCoords:function(e){!function(e){var n,o=Object(D.a)(e.myGhostCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}}(e),e.myGhostCoords=[];var n,o=Object(D.a)(e.myCurrentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.myGhostCoords.push({x:t.x,y:t.y})}}catch(N){o.e(N)}finally{o.f()}for(var r=e.yPos;4===e.myGhostCoords.length;)r+=1,e.myGhostCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,r),!0);r-=1,e.myGhostCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,r),!0)},hardDrop:function(e){We(e),e.myCurrentCoords=e.myGhostCoords,qe(e),e.currentGameStatus="FROZEN"},showGhostPiece:function(e){qe(e,!0)},shiftLeft:function(e){We(e),e.xPos-=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.xPos+=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",qe(e)},shiftRight:function(e){We(e),e.xPos+=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.xPos-=1,e.myCurrentCoords=Ue(e,Fe(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",qe(e)},placeCurrentPiece:function(e){qe(e)},gameWon:function(e){e.gameRunning=!1},holdPiece:function(e){if(!0!==e.rotated){if(e.rotated=!0,We(e),null===e.heldPiece){var n;e.heldPiece=e.currentShape,e.currentShape=Je.dequeue(),(n=Je).enqueue.apply(n,Object(T.a)(Ke()))}else{var o=e.currentShape;e.currentShape=e.heldPiece,e.heldPiece=o}e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=Ue(e,Fe(e.currentShape,e.rotatePos,e.xPos,e.yPos)),qe(e),e.currentPieceState="FALLING"}},setMultiplayer:function(e,n){e.playerNumber=n.payload.playerNumber,Ze=n.payload.roomRef},setDisplayMessage:function(e,n){e.displayMessage=n.payload,"in game"===e.displayMessage&&(e.gameRunning=!0),e.displayMessage.includes("WON")&&(e.gameRunning=!1)},setMyTurn:function(e,n){e.myTurn=n.payload},setMyLinesCleared:function(e,n){e.myLinesCleared=n.payload},setLinesToClear:function(e,n){e.linesToClear=n.payload,e.lineDeduction=Math.floor(n.payload/5)},setTurnTaken:function(e,n){e.turnTaken=n.payload}}}),Ye=ze.actions,Xe=ze.reducer,Ve=function(e){var n=e.roomKey,o=e.opponentuid,t=Object(N.b)(),r=Object(i.useState)(null),a=Object(c.a)(r,2),u=a[0],l=a[1],d=function(){var e=Object(S.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,I(o);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(S.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.l)(Object(s.a)(G,n+"/accepted"),!0);case 2:return e.next=4,Object(s.l)(Object(s.a)(G,n+"/displayMessage"),"");case 4:return t(Ge.setOpponentid(o)),t(Ge.setRoomStatus("in room")),t(Ge.setRoomKey(n)),t(Ge.setOpponentName(u)),t(Ye.setMultiplayer({playerNumber:2,roomRef:Object(s.a)(G,n)})),e.next=11,Object(s.l)(Object(s.a)(R,L.currentUser.uid+"/inRoom"),!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d(),Object(O.jsxs)("div",{children:[u,Object(O.jsx)("button",{onClick:j,children:"ACCEPT"}),Object(O.jsx)("button",{onClick:j,children:"DECLINE"})]})},$e=function(){var e=Object(N.c)((function(e){return e.userInfo.invitationKeys}));return 0!==e.length&&(e=e.map((function(e,n){var o=e.roomKey,t=e.opponentuid;return Object(O.jsx)(Ve,{roomKey:o,opponentuid:t},n)}))),Object(O.jsxs)(we,{children:[Object(O.jsx)("p",{style:{margin:0},children:"Room Invitations"}),e]})},en=Object(i.memo)($e),nn=o(52),on=o.n(nn),tn=o(40),rn=o.n(tn),Nn=function(e){var n=e.color;return Object(O.jsx)("div",{className:"".concat(rn.a.block,"  ").concat(rn.a[n])})},cn=o(41),an=o.n(cn),sn=function(){var e=Object(N.c)((function(e){return e.gameState2.displayMessage}));return"in game"===e?Object(O.jsx)("div",{className:an.a.readyGo}):Object(O.jsx)("div",{className:an.a.readyGo,children:e})},un=Object(i.memo)(sn),ln=function(){var e=Object(N.c)((function(e){return e.gameState2})).grid.slice(1).map((function(e,n){return Object(O.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(O.jsx)(Nn,{color:e},n)}))},n)}));return Object(O.jsxs)("div",{className:on.a.grid,children:[e,Object(O.jsx)(un,{})]})},dn={I:[[[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],T:[[[0,1,0],[1,1,1]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],L:[[[0,0,1],[1,1,1]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],J:[[[1,0,0],[1,1,1]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],S:[[[0,1,1],[1,1,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],O:[[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]]]},jn=o(23),fn=o.n(jn),bn=function(e){var n=dn[e.color][0].map((function(n,o){return Object(O.jsx)("div",{className:fn.a.pieceRow,children:n.map((function(n,o){return 0===n?Object(O.jsx)(Nn,{color:null},o):Object(O.jsx)(Nn,{color:e.color},o)}))},o)}));return Object(O.jsx)("div",{className:fn.a.piece,children:n})},pn=function(e){var n=e.player,o=Object(N.c)((function(e){return e.gameState2.opponentPieceQueue})),t=(Object(N.c)((function(e){return e.gameState2.myTurn})),0),r=[];if("mine"===n){if(Je.isEmpty)return Object(O.jsx)("div",{className:fn.a.pieceQueue});for(var c in Je.elements)r.push(Object(O.jsx)(bn,{color:Je.elements[c]},t++));return Object(O.jsx)(i.Fragment,{children:Object(O.jsx)("div",{className:fn.a.pieceQueue,children:r})})}if("opponent"===n){if(!o||o.isEmpty)return Object(O.jsx)("div",{className:fn.a.pieceQueue});for(var a in o)a&&r.push(Object(O.jsx)(bn,{color:o[a]},t++));return Object(O.jsx)(i.Fragment,{children:Object(O.jsx)("div",{className:fn.a.pieceQueue,children:r})})}},hn=o(42),On=o.n(hn),mn=function(e){var n=e.player,o=Object(N.c)((function(e){return e.gameState2.opponentLinesCleared})),t=Object(N.c)((function(e){return e.gameState2.myLinesCleared}));return"opponent"===n?Object(O.jsx)("div",{className:On.a.counterOpponent,children:o}):"mine"===n?Object(O.jsx)("div",{className:On.a.counterMyself,children:t}):void 0},yn=Object(i.memo)(mn),gn=function(){var e=Object(N.c)((function(e){return e.gameState2.gameRunning})),n=Object(N.c)((function(e){return e.gameState2.myTurn})),o=Object(N.c)((function(e){return e.userInfo.opponentName}));return e?n?Object(O.jsx)("div",{style:{textAlign:"center"},children:"Your Turn"}):Object(O.jsx)("div",{style:{textAlign:"center"},children:"".concat(o,"'s Turn")}):Object(O.jsx)("div",{style:{textAlign:"center",height:"24px"},children:" "})},vn=Object(i.memo)(gn),xn=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.gameState2.linesToClear})),o=Object(i.useState)(n),t=Object(c.a)(o,2),r=t[0],a=t[1];return Object(s.h)(Object(s.a)(Ze,"linesToClear"),(function(n){n.exists()&&e(Ye.setLinesToClear(n.val()))})),Object(O.jsxs)(we,{children:[Object(O.jsx)("label",{id:"lines",children:"Lines to Clear "}),Object(O.jsx)("input",{id:"lines",type:"number",value:r,onChange:function(e){e.target.value<=0||a(+e.target.value)}}),Object(O.jsx)("button",{onClick:function(){Object(s.d)(Object(s.a)(Ze,"linesToClear")),e(Ye.setLinesToClear(r)),Object(s.l)(Object(s.a)(Ze,"linesToClear"),r)},children:"set"}),Object(O.jsxs)("span",{children:[" Current amount is ",n]})]})},Pn=!1,Cn=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.controls})),o=Object(N.c)((function(e){return e.gameState2.playerNumber})),t=Object(N.c)((function(e){return e.userInfo.opponentName})),r=Object(N.c)((function(e){return e.gameState2.myTurn})),c=(Object(N.c)((function(e){return e.gameState2.displayMessage})),Object(N.c)((function(e){return e.gameState2.gameRunning}))),a=(Object(N.c)((function(e){return e.gameState2.currentGameStatus})),Object(N.c)((function(e){return e.gameState2.keepTurn}))),u=Object(N.c)((function(e){return e.gameState2.grid}));Object(i.useEffect)((function(){if(c&&r){Object(s.d)(Object(s.a)(Ze,"grid")),console.log("here"),e(Ye.getNewPiece(t)),Object(s.l)(Object(s.a)(Ze,"player".concat(o,"GameInfo/gameQueue")),Je.elements),e(Ye.placeCurrentPiece()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece());var n=setInterval((function(){j()}),300),N=setInterval((function(){d()}),1),a=setInterval((function(){l()}),1);return function(){clearInterval(n),clearInterval(N),clearInterval(a)}}}),[r,c,e,a]);var l=function(){var o=Object(S.a)(Object(C.a)().mark((function o(){var t;return Object(C.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(t in be)be[t]&&(be[t]+=1);je[n.softDrop]&&fe[n.softDrop]&&be[n.softDrop]>40&&(e(Ye.dropPiece()),fe[n.softDrop]=!0,be[n.softDrop]=30),je[n.moveRight]&&fe[n.moveRight]&&be[n.moveRight]>40&&(e(Ye.shiftRight()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.moveRight]=!0,be[n.moveRight]=30),je[n.moveLeft]&&fe[n.moveLeft]&&be[n.moveLeft]>40&&(e(Ye.shiftLeft()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.moveLeft]=!0,be[n.moveLeft]=30);case 4:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),d=function(){var o=Object(S.a)(Object(C.a)().mark((function o(){return Object(C.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c&&!Pn){o.next=2;break}return o.abrupt("return");case 2:je[n.rotateLeft]&&!fe[n.rotateLeft]&&(e(Ye.rotatePiece(!0)),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.rotateLeft]=!0),je[n.rotateRight]&&!fe[n.rotateRight]&&(e(Ye.rotatePiece(!1)),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.rotateRight]=!0),je[n.hardDrop]&&!fe[n.hardDrop]&&(Pn=!0,e(Ye.hardDrop()),fe[n.hardDrop]=!0,setTimeout((function(){Pn=!1}),400)),je[n.softDrop]&&!fe[n.softDrop]&&(be[n.softDrop]=1,e(Ye.dropPiece()),fe[n.softDrop]=!0),je[n.moveRight]&&!fe[n.moveRight]&&(be[n.moveRight]=1,e(Ye.shiftRight()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.moveRight]=!0),je[n.moveLeft]&&!fe[n.moveLeft]&&(be[n.moveLeft]=1,e(Ye.shiftLeft()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece()),fe[n.moveLeft]=!0);case 8:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),j=function(){var n=Object(S.a)(Object(C.a)().mark((function n(){return Object(C.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(Ye.dropPiece()),e(Ye.getGhostCoords()),e(Ye.showGhostPiece());case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){r&&Object(s.l)(Object(s.a)(Ze,"grid"),u)}),[u,r])},Sn=!1,_n=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.controls})),o=Object(N.c)((function(e){return e.gameState2.playerNumber})),t=(Object(N.c)((function(e){return e.userInfo.opponentName})),Object(N.c)((function(e){return e.gameState2.myTurn}))),r=Object(N.c)((function(e){return e.gameState2.displayMessage})),c=Object(N.c)((function(e){return e.gameState2.gameRunning})),a=Object(N.c)((function(e){return e.gameState2.currentGameStatus})),u=Object(N.c)((function(e){return e.gameState2.myLinesCleared})),l=Object(N.c)((function(e){return e.gameState2.linesToClear})),d=Object(N.c)((function(e){return e.gameState2.turnTaken})),j=Object(N.c)((function(e){return e.gameState2.keepTurn2}));r||(Sn=!1),r.includes("WON")&&setTimeout((function(){Sn=!1}),1e3),"FROZEN"===a&&(e(Ye.unfreeze()),e(Ye.clearLines()),e(Ye.setTurnTaken(!0))),Object(i.useEffect)((function(){d&&(u>=l?(Object(s.l)(Object(s.a)(Ze,"turn"),null),I(L.currentUser.uid).then((function(e){Object(s.l)(Object(s.a)(Ze,"displayMessage"),"".concat(e," WON"))})),e(Ye.gameWon())):j||Object(s.l)(Object(s.a)(Ze,"turn"),1===o?2:1)),e(Ye.setTurnTaken(!1))}),[u,l,e,d,j]),Object(i.useEffect)((function(){if(c)return Object(s.d)(Object(s.a)(Ze,"player".concat(1===o?2:1,"GameInfo"))),e(Ye.newGame()),Object(s.l)(Object(s.a)(Ze,"player".concat(o,"GameInfo")),{gameQueue:Je.elements,linesCleared:u}),function(){}}),[c]),Object(i.useEffect)((function(){Object(s.l)(Object(s.a)(Ze,"player".concat(o,"GameInfo")),{gameQueue:Je.elements,linesCleared:u})}),[u,Je.elements]);var f=function(){var e=Object(S.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(s.l)(Object(s.a)(Ze,"displayMessage"),"READY"),e.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:return Object(s.l)(Object(s.a)(Ze,"displayMessage"),"GO"),e.next=6,new Promise((function(e){return setTimeout(e,500)}));case 6:return e.next=8,Object(s.l)(Object(s.a)(Ze,"displayMessage"),"in game");case 8:return e.next=10,Object(s.l)(Object(s.a)(Ze,"grid"),[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]]);case 10:return e.next=12,Object(s.l)(Object(s.a)(Ze,"/turn"),1===o?2:1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.g)(Object(s.a)(R,L.currentUser.uid+"/inRoom")).set(!1),Object(i.useEffect)((function(){Object(s.h)(Object(s.a)(Ze,"displayMessage"),(function(n){n.exists()&&(e(Ye.setDisplayMessage(n.val())),"READY"===n.val()&&(e(Ye.gettingReady()),Object(s.l)(Object(s.a)(Ze,"player".concat(o,"GameInfo")),{gameQueue:Je.elements,linesCleared:u}),Sn=!0))}))})),c&&!t&&Object(s.h)(Object(s.a)(Ze,"grid"),(function(n){n.exists()&&e(Ye.setGrid(n.val()))})),c&&!t&&Object(s.h)(Object(s.a)(Ze,"player".concat(o,"GameInfo/linesCleared")),(function(n){e(Ye.setMyLinesCleared(n.val()))})),Object(s.h)(Object(s.a)(Ze,"player".concat(1===o?2:1,"GameInfo")),(function(n){n.exists()&&e(Ye.setOpponentInfo({opponentPieceQueue:n.val().gameQueue,opponentLinesCleared:n.val().linesCleared}))})),Object(s.h)(Object(s.a)(Ze,"turn"),(function(n){n.exists()&&e(Ye.setMyTurn(n.val()===o))})),document.onkeydown=function(e){Sn||e.key===n.newGame&&(Sn=!0,f())},Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)(pe,{}),Object(O.jsx)(Cn,{}),Object(O.jsx)(vn,{}),Object(O.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",justifyContent:"center"},children:[Object(O.jsx)(yn,{player:"opponent"}),Object(O.jsx)(pn,{player:"opponent"}),Object(O.jsx)(ln,{}),Object(O.jsx)(pn,{player:"mine"}),Object(O.jsx)(yn,{player:"mine"})]}),!c&&Object(O.jsx)(xn,{}),Object(O.jsx)(we,{children:Object(O.jsxs)("div",{style:{color:"yellow"},children:[Object(O.jsx)("p",{children:"How To Play:"}),Object(O.jsx)("p",{children:"Press esc to start."}),Object(O.jsx)("p",{children:"Game starts with other person first."}),Object(O.jsx)("p",{children:"After player drops piece, other player goes."}),Object(O.jsx)("p",{children:"Person that causes the board to overflow loses a line point."}),Object(O.jsx)("p",{children:"Play until a person clears an amount of lines."})]})})]})},Ln=Object(i.memo)(_n),wn=function(e){var n=e.leaveRoomHandler;return Object(O.jsx)(we,{children:Object(O.jsx)("button",{onClick:n,children:"Leave Room"})})},kn=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.userInfo.roomStatus})),o=Object(N.c)((function(e){return e.userInfo.isLoggedIn})),t=Object(N.c)((function(e){return e.gameState2.playerNumber})),r=Object(N.c)((function(e){return e.userInfo.roomKey}));r&&Object(s.g)(Object(s.a)(G,r)).remove(),Object(s.h)(R,(function(){L.currentUser&&Object(s.b)(R).then((function(n){n.val()&&e(Ge.setOtherUsers(Object.entries(n.val()).filter((function(e){return e[0]!==L.currentUser.uid&&!e[1].inRoom}))))}))})),r&&Object(s.h)(Object(s.a)(G,r+"/accepted"),(function(n){n.exists()&&(n.val()?2!==t&&(e(Ye.setMultiplayer({playerNumber:1,roomRef:Object(s.a)(G,r)})),e(Ge.setRoomStatus("in room")),Object(s.l)(Object(s.a)(R,L.currentUser.uid+"/inRoom"),!0)):e(Ge.setRoomStatus("waiting")))})),Object(s.e)(G,(function(){L.currentUser&&Object(s.b)(G).then((function(n){n.exists()&&e(Ge.setInvitiationKeys(Object.entries(n.val()).filter((function(e){return!e[1].accepted&&e[1].player2===L.currentUser.uid})).map((function(e){return{opponentuid:e[1].player1,roomKey:e[0]}}))))}))})),Object(s.f)(G,(function(){L.currentUser&&Object(s.b)(G).then((function(n){n.exists()?e(Ge.setInvitiationKeys(Object.entries(n.val()).filter((function(e){return!e[1].accepted&&e[1].player2===L.currentUser.uid})).map((function(e){return{opponentuid:e[1].player1,roomKey:e[0]}})))):e(Ge.setInvitiationKeys([]))}))}));var c=Object(N.c)((function(e){return e.userInfo.opponentID})),a=function(){var n=Object(S.a)(Object(C.a)().mark((function n(){return Object(C.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(s.d)(Object(s.a)(R,c)),e(Ye.reset()),n.next=4,Object(s.k)(Object(s.a)(G,r));case 4:e(Ge.reset()),L.currentUser&&Object(s.l)(Object(s.a)(R,L.currentUser.uid+"/inRoom"),!1);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return c&&Object(s.h)(Object(s.a)(R,c),function(){var e=Object(S.a)(Object(C.a)().mark((function e(n){var o;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.exists()){e.next=4;break}a(),e.next=9;break;case 4:if(!n.val().inRoom){e.next=9;break}return o=!1,e.next=8,Object(s.b)(Object(s.a)(Ze,"accepted")).then((function(e){o=e.val()}));case 8:o||a();case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),"in room"===n&&Object(s.h)(Ze,(function(n){n.exists()||(Object(s.d)(Object(s.a)(G,r)),Object(s.d)(Object(s.a)(R,c)),e(Ge.reset()),L.currentUser&&Object(s.l)(Object(s.a)(R,L.currentUser.uid+"/inRoom"),!1),e(Ye.reset()))})),Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)("h1",{children:"Ditris Two-Player"}),!o&&Object(O.jsx)("p",{children:"Login to begin"}),"looking for room"===n&&Object(O.jsx)(en,{}),"looking for room"===n&&Object(O.jsx)(Ee,{}),"waiting"===n&&Object(O.jsx)(Ae,{cancelRoomHandler:a}),"in room"===n&&Object(O.jsx)(wn,{leaveRoomHandler:a}),"in room"===n&&Object(O.jsx)(Ln,{})]})},Rn=o(53),Gn=o.n(Rn),In=function(e){var n=e.setPage,o=e.setShowKeyBindings;return Object(O.jsxs)("ul",{className:Gn.a["nav-bar"],children:[Object(O.jsx)("li",{onClick:function(){n("singleplayer")},children:"SinglePlayer"}),Object(O.jsx)("li",{onClick:function(){n("two-player")},children:"Two-Player"}),Object(O.jsx)("li",{style:{backgroundColor:"#333",float:"right"},children:Object(O.jsx)(Se,{})}),Object(O.jsx)("li",{onClick:function(){o(!0)},style:{float:"right"},children:"Set Controls"})]})},Tn=function(){var e=Object(N.b)(),n=Object(i.useState)(Object(O.jsx)(ve,{})),o=Object(c.a)(n,2),t=o[0],r=o[1],l=Object(i.useState)(!1),d=Object(c.a)(l,2),j=d[0],f=d[1];return Object(a.b)(L,(function(n){n?(e(Ge.login()),e(Ge.reset()),e(Ge.setRoomStatus("looking for room"))):(e(Ge.logout()),ke&&Object(s.d)(ke),e(Ge.reset()))})),Object(O.jsxs)(u.a.Fragment,{children:[Object(O.jsx)(In,{setPage:function(n){"singleplayer"===n?(e(z.reset()),r(Object(O.jsx)(ve,{}))):"two-player"===n&&(Ze&&Object(s.k)(Ze),e(Ye.reset()),r(Object(O.jsx)(kn,{})))},setShowKeyBindings:f}),t,j&&Object(O.jsx)(P,{setShowKeyBindings:f})]})},Dn=Object(l.a)({reducer:{gameState:Y,userInfo:Ie,gameState2:Xe,controls:f}});r.a.createRoot(document.getElementById("root")).render(Object(O.jsx)(N.a,{store:Dn,children:Object(O.jsx)(Tn,{})}))}},[[68,1,2]]]);
//# sourceMappingURL=main.76c17f62.chunk.js.map