(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{22:function(e,n,o){e.exports={title:"HeldBlock_title__-UOyq",heldBlockOuter:"HeldBlock_heldBlockOuter__1Xhyv",grid:"HeldBlock_grid__rrQf0",gridRow:"HeldBlock_gridRow__2llk9"}},23:function(e,n,o){e.exports={pieceQueue:"PieceQueue_pieceQueue___hxZt",piece:"PieceQueue_piece__NTkk0",pieceRow:"PieceQueue_pieceRow__1CaEL"}},29:function(e,n,o){e.exports={pieceQueue:"PieceQueue_pieceQueue__N5gJS",piece:"PieceQueue_piece__1nqbS",pieceRow:"PieceQueue_pieceRow__2ZzqI"}},30:function(e,n,o){e.exports={everything:"GameSettings_everything__3aoE2",invalid:"GameSettings_invalid__HAlhD",valid:"GameSettings_valid__3a2OQ"}},32:function(e,n,o){e.exports={login:"Login_login__2ZnT8","error-text":"Login_error-text__1rXdS"}},35:function(e,n,o){e.exports={invite:"InviteNotification_invite__3ZfLo",accept:"InviteNotification_accept__3F_oe",decline:"InviteNotification_decline__2_IiA"}},39:function(e,n,o){e.exports={backdrop:"Modal_backdrop__2znzX","fade-in":"Modal_fade-in__1v-Qz",modal:"Modal_modal__2QgxK"}},40:function(e,n,o){e.exports={block:"Block_block__1kjjl",None:"Block_None__ltR1S",I:"Block_I__1Pnys",T:"Block_T__WdEBm",L:"Block_L__1zsbc",J:"Block_J__2iV29",Z:"Block_Z__28EjD",S:"Block_S__MKS_j",O:"Block_O__3X5pc",Ighost:"Block_Ighost__1pBKL",Tghost:"Block_Tghost__2h680",Lghost:"Block_Lghost__3KiXo",Jghost:"Block_Jghost__9BTwX",Zghost:"Block_Zghost__3ytmC",Sghost:"Block_Sghost__1z9Pj",Oghost:"Block_Oghost__34NVA"}},41:function(e,n,o){e.exports={readyGo:"ReadyGo_readyGo__18l16"}},42:function(e,n,o){e.exports={OtherUser:"OtherUser_OtherUser__c1mKe"}},43:function(e,n,o){e.exports={span:"WaitingMessage_span__2-5Ka",cancel:"WaitingMessage_cancel__3ScKO"}},44:function(e,n,o){e.exports={block:"Block_block__7hl6T",None:"Block_None__2PHRA",I:"Block_I__2hPz5",T:"Block_T__1zbV7",L:"Block_L__vPAnW",J:"Block_J__1lt8I",Z:"Block_Z__2BuFD",S:"Block_S__36R4_",O:"Block_O__1LvhJ",Ighost:"Block_Ighost__lbI0G",Tghost:"Block_Tghost__3-N71",Lghost:"Block_Lghost__2imGj",Jghost:"Block_Jghost__3QcrR",Zghost:"Block_Zghost__eEqpK",Sghost:"Block_Sghost__2Fbny",Oghost:"Block_Oghost__1cvVz"}},45:function(e,n,o){e.exports={readyGo:"ReadyGo_readyGo__3i4cO"}},46:function(e,n,o){e.exports={counterOpponent:"LineClearedCounter_counterOpponent__3bjI0",counterMyself:"LineClearedCounter_counterMyself__2Fnqt"}},53:function(e,n,o){},54:function(e,n,o){e.exports={grid:"Grid_grid__9Fsru"}},55:function(e,n,o){e.exports={card:"Card_card__2N-0v"}},56:function(e,n,o){e.exports={grid:"Grid_grid__3hTgC"}},57:function(e,n,o){e.exports={"leave-room":"LeaveRoom_leave-room__3SrUE"}},58:function(e,n,o){e.exports={"nav-bar":"NavigationBar_nav-bar__WRYyO"}},71:function(e,n,o){},73:function(e,n,o){"use strict";o.r(n);var t=o(49),r=o.n(t),N=o(9),c=(o(71),o(11)),a=o(25),s=o(8),i=o(7),u=o.n(i),l=o(20),d=Object(l.b)({name:"controls",initialState:{newGame:"Escape",moveLeft:"ArrowLeft",moveRight:"ArrowRight",softDrop:"ArrowDown",hardDrop:" ",rotateLeft:"z",rotateRight:"ArrowUp",hold:"c"},reducers:{resetDefault:function(e){e.newGame="Escape",e.moveLeft="ArrowLeft",e.moveRight="ArrowRight",e.softDrop="ArrowDown",e.hardDrop=" ",e.rotateLeft="z",e.rotateRight="ArrowUp",e.hold="c"},resetAlternate:function(e){e.newGame="Escape",e.moveLeft="ArrowLeft",e.moveRight="ArrowRight",e.softDrop="ArrowDown",e.hardDrop=" ",e.rotateLeft="q",e.rotateRight="w",e.hold="Tab"},setNewControls:function(e,n){e.newGame=n.payload.newGame,e.moveLeft=n.payload.moveLeft,e.moveRight=n.payload.moveRight,e.softDrop=n.payload.softDrop,e.hardDrop=n.payload.hardDrop,e.rotateLeft=n.payload.rotateLeft,e.rotateRight=n.payload.rotateRight,e.hold=n.payload.hold}}}),j=d.actions,f=d.reducer,b=o(24),p=o(39),O=o.n(p),h=o(2),m=function(e){return Object(h.jsx)("div",{className:O.a.backdrop,onClick:e.onClick})},g=function(e){var n=e.children;return Object(h.jsx)("div",{className:O.a.modal,children:n})},y=function(e){var n=document.getElementById("overlays");return Object(h.jsxs)(i.Fragment,{children:[Object(b.createPortal)(Object(h.jsx)(m,{onClick:e.onClick}),n),Object(b.createPortal)(Object(h.jsx)(g,{children:e.children}),n)]})},v=function(e){var n=e.controlName,o=e.input,t=e.setInput,r=e.currentKey,N=Object(i.useState)(!1),a=Object(c.a)(N,2),s=a[0],u=a[1];Object(i.useEffect)((function(){document.onkeydown=function(e){s&&t(e.key)}}),[s,t]);var l=o;return" "===l&&(l="space"),Object(i.useEffect)((function(){t(r)}),[r,t]),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:n,children:"".concat(n," ")}),Object(h.jsx)("input",{onChange:function(e){1===e.target.value.length&&e.target.blur()},onFocus:function(e){t(""),u(!0)},onBlur:function(e){""===e.target.value&&t(r),u(!1)},id:n,value:l})]})},x=function(e){var n=e.setShowKeyBindings,o=Object(N.b)(),t=Object(N.c)((function(e){return e.controls})),r=Object(i.useState)(t.newGame),a=Object(c.a)(r,2),s=a[0],u=a[1],l=Object(i.useState)(t.rotateRight),d=Object(c.a)(l,2),f=d[0],b=d[1],p=Object(i.useState)(t.rotateLeft),O=Object(c.a)(p,2),m=O[0],g=O[1],x=Object(i.useState)(t.hold),P=Object(c.a)(x,2),S=P[0],C=P[1],_=Object(i.useState)(t.hardDrop),L=Object(c.a)(_,2),k=L[0],G=L[1],w=Object(i.useState)(t.softDrop),R=Object(c.a)(w,2),I=R[0],T=R[1],D=Object(i.useState)(t.moveLeft),E=Object(c.a)(D,2),A=E[0],B=E[1],M=Object(i.useState)(t.moveRight),F=Object(c.a)(M,2),K=F[0],U=F[1];return Object(h.jsxs)(y,{onClick:function(){n(!1)},children:[Object(h.jsx)("button",{onClick:function(){n(!1)},style:{float:"right"},children:"X"}),Object(h.jsx)(v,{controlName:"newGame",currentKey:t.newGame,input:s,setInput:u}),Object(h.jsx)(v,{currentKey:t.rotateRight,controlName:"rotateRight",input:f,setInput:b}),Object(h.jsx)(v,{currentKey:t.rotateLeft,controlName:"rotateLeft",input:m,setInput:g}),Object(h.jsx)(v,{currentKey:t.hold,controlName:"hold",input:S,setInput:C}),Object(h.jsx)(v,{currentKey:t.hardDrop,controlName:"hardDrop",input:k,setInput:G}),Object(h.jsx)(v,{currentKey:t.softDrop,controlName:"softDrop",input:I,setInput:T}),Object(h.jsx)(v,{currentKey:t.moveLeft,controlName:"moveLeft",input:A,setInput:B}),Object(h.jsx)(v,{currentKey:t.moveRight,controlName:"moveRight",input:K,setInput:U}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){o(j.resetDefault())},children:"Default"}),Object(h.jsx)("button",{onClick:function(){o(j.resetAlternate())},children:"Alternate"}),Object(h.jsx)("button",{onClick:function(){o(j.setNewControls({newGame:s,rotateRight:f,rotateLeft:m,hardDrop:k,softDrop:I,moveLeft:A,moveRight:K,hold:S}))},children:"Save"})]})]})},P=Object(i.memo)(x),S=o(0),C=o(3),_=o(52);Object(_.a)({apiKey:"AIzaSyA9ipNK6_boqbwThQlJgolni-O5iIgIl40",authDomain:"ditris-2244c.firebaseapp.com",databaseURL:"https://ditris-2244c-default-rtdb.firebaseio.com",projectId:"ditris-2244c",storageBucket:"ditris-2244c.appspot.com",messagingSenderId:"743373731037",appId:"1:743373731037:web:9552a80db8b0df8d875734"});var L=Object(a.a)(),k=Object(s.c)(),G=Object(s.j)(k),w=Object(s.a)(G,"users"),R=Object(s.a)(G,"rooms"),I=function(){var e=Object(C.a)(Object(S.a)().mark((function e(n){var o;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.b)(Object(s.a)(w,n)).then((function(e){o=e.val().username}));case 2:return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T={},D={},E={},A=function(){window.addEventListener("keydown",(function(e){T[e.key]=!0,"Tab"===e.key&&(e.preventDefault(),e.stopPropagation()),"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation()),"ArrowUp"===e.key&&(e.preventDefault(),e.stopPropagation())})),window.addEventListener("keyup",(function(e){E[e.key]=0,T[e.key]=!1,D[e.key]=!1}))},B=o(14),M=o(10),F={I:[[[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],T:[[[0,1,0],[1,1,1]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],L:[[[0,0,1],[1,1,1]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],J:[[[1,0,0],[1,1,1]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],S:[[[0,1,1],[1,1,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],O:[[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]]]},K=o(5),U=o(6),Q=function(){function e(){Object(K.a)(this,e),this.elements={},this.head=0,this.tail=0}return Object(U.a)(e,[{key:"enqueue",value:function(e){this.elements[this.tail]=e,this.tail++}},{key:"dequeue",value:function(){var e=this.elements[this.head];return delete this.elements[this.head],this.head++,e}},{key:"peek",value:function(){return this.elements[this.head]}},{key:"empty",value:function(){for(;!this.isEmpty;)this.dequeue()}},{key:"length",get:function(){return this.tail-this.head}},{key:"isEmpty",get:function(){return 0===this.length}}]),e}(),Z=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],J=function(){0===Z.length&&(Z=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"]);var e=Math.floor(Z.length*Math.random());return Z.splice(e,1)},H=function(e,n,o,t){return F[e][n].map((function(e,n){return e.map((function(e,r){return e?{x:o+r,y:t+n}:null}))}))},q=function(e,n){var o,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],N=Object(M.a)(n);try{for(N.s();!(o=N.n()).done;){var c,a=o.value,s=Object(M.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i&&Y(e,i,t)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){N.e(u)}finally{N.f()}return r},W={playerNumber:null,gameRunning:!1,currentShape:null,currentCoords:[],ghostCoords:[],pieceQueue:null,heldPiece:null,linesCleared:0,linesToClear:40,gameSpeed:1e3,currentGameStatus:"NONE",rotatePos:0,xPos:3,yPos:0,grid:[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],rotated:!1,displayMessage:"",endTurn:!1,gettingPiece:!1},z=new Q,V=function(e){var n,o=Object(M.a)(e.currentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}},X=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.grid.map((function(e){return e.slice()}));if(n){var t,r=e.currentShape+"ghost",N=Object(M.a)(e.ghostCoords);try{for(N.s();!(t=N.n()).done;){var c=t.value;o[c.y][c.x]=r;var a,s=Object(M.a)(e.currentCoords);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.y===c.y&&i.x===c.x&&(o[c.y][c.x]=e.currentShape)}}catch(j){s.e(j)}finally{s.f()}}}catch(j){N.e(j)}finally{N.f()}}else{var u,l=Object(M.a)(e.currentCoords);try{for(l.s();!(u=l.n()).done;){var d=u.value;o[d.y][d.x]=e.currentShape}}catch(j){l.e(j)}finally{l.f()}}e.grid=o},Y=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&n.y<=20&&n.x>=0&&n.x<=9){var t,r=Object(M.a)(e.currentCoords);try{for(r.s();!(t=r.n()).done;){var N=t.value;if(o&&N.y===n.y&&N.x===n.x)return!0}}catch(c){r.e(c)}finally{r.f()}if(e.grid[n.y][n.x].length>1)return!0}return!1},$=Object(l.b)({name:"gameState2",initialState:W,reducers:{resetSP:function(e){e.playerNumber=null,e.gameRunning=!1,e.currentShape=null,e.currentCoords=[],e.ghostCoords=[],e.pieceQueue=null,e.heldPiece=null,e.linesCleared=0,e.currentGameStatus="NONE",e.rotatePos=0,e.xPos=3,e.yPos=0,e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.rotated=!1,e.displayMessage="",e.gettingPiece=!1,e.endTurn=!1,z=new Q},gettingReadySP:function(e){e.gameRunning=!1,e.currentShape=null,e.currentCoords=[],e.ghostCoords=[],e.pieceQueue=null,e.heldPiece=null,e.linesCleared=0,e.currentGameStatus="NONE",e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],Z=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],z=new Q;for(var n=0;n<5;n++){var o;(o=z).enqueue.apply(o,Object(B.a)(J()))}},newGameSP:function(e){e.xPos=3,e.yPos=0,e.rotatePos=0,e.gettingPiece=!0,e.gameRunning=!0},clearLinesSP:function(e){var n,o=[],t=0,r=Object(M.a)(e.grid);try{for(r.s();!(n=r.n()).done;){var N=n.value;N.every((function(e){return"None"!==e}))?(e.linesCleared+=1,t+=1):o.push(N)}}catch(a){r.e(a)}finally{r.f()}for(var c=0;c<t;c++)o.unshift(["None","None","None","None","None","None","None","None","None","None"]);e.grid=o,e.endTurn=!0},setGettingNewPieceSP:function(e,n){e.endTurn=!1,e.gettingPiece=n.payload},getNewPieceSP:function(e){var n;e.ghostCoords=[],e.currentShape=z.dequeue(),(n=z).enqueue.apply(n,Object(B.a)(J())),e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.gameRunning=!1,e.gettingPiece=!1,e.displayMessage="YOU LOST"):(X(e),e.currentGameStatus="FALLING",e.gettingPiece=!1)},rotatePieceSP:function(e,n){var o=e.rotatePos;e.rotatePos=function(e,n){var o=n.rotatePos;return e?0===o?3:o-1:3===o?0:o+1}(n.payload,{rotatePos:e.rotatePos}),V(e),e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.rotatePos=o,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",X(e)},dropPieceSP:function(e){if(e.gameRunning){if("LANDING"===e.currentGameStatus)return void(e.currentGameStatus="FROZEN");if("FROZEN"===e.currentGameStatus)return;V(e),e.yPos+=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.yPos-=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentGameStatus="LANDING"):e.currentGameStatus="FALLING",X(e)}},getGhostCoordsSP:function(e){if(e.currentCoords.length<4);else{!function(e){var n,o=Object(M.a)(e.ghostCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}}(e),e.ghostCoords=[];var n,o=Object(M.a)(e.currentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.ghostCoords.push({x:t.x,y:t.y})}}catch(N){o.e(N)}finally{o.f()}for(var r=e.yPos;4===e.ghostCoords.length;)r+=1,e.ghostCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,r),!0);r-=1,e.ghostCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,r),!0)}},hardDropSP:function(e){V(e),e.currentCoords=e.ghostCoords,X(e),e.currentGameStatus="FROZEN"},showGhostPieceSP:function(e){X(e,!0)},shiftLeftSP:function(e){V(e),e.xPos-=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.xPos+=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",X(e)},shiftRightSP:function(e){V(e),e.xPos+=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),e.currentCoords.length<4?(e.xPos-=1,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",X(e)},gameWonSP:function(e){e.gameRunning=!1,e.displayMessage="GAME WON"},resetRotationSP:function(e){e.rotated=!1},holdPieceSP:function(e){if(!0!==e.rotated){if(e.rotated=!0,V(e),null===e.heldPiece){var n;e.heldPiece=e.currentShape,e.currentShape=z.dequeue(),(n=z).enqueue.apply(n,Object(B.a)(J()))}else{var o=e.currentShape;e.currentShape=e.heldPiece,e.heldPiece=o}e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=q(e,H(e.currentShape,e.rotatePos,e.xPos,e.yPos)),X(e),e.currentGameStatus="FALLING"}},setDisplayMessageSP:function(e,n){e.displayMessage=n.payload},setSettings:function(e,n){e.linesToClear=n.payload.linesToClear,e.gameSpeed=n.payload.gameSpeed},setSettingsDefault:function(e){e.linesToClear=40,e.gameSpeed=1e3}}}),ee=$.actions,ne=$.reducer,oe=function(e,n){var o=Object(i.useState)(n),t=Object(c.a)(o,2),r=t[0],N=t[1],a=Object(i.useState)(!1),s=Object(c.a)(a,2),u=s[0],l=s[1],d=e(r);return{value:r,isTouched:u,hasError:u&&!d,isValueValid:d,valueChangeHandler:function(e){N(e.target.value)},blurHandler:function(e){l(!0)},reset:function(){l(!1),N("")},setValue:N}},te=o(30),re=o.n(te),Ne=function(e){var n=e.onClick,o=Object(N.b)(),t=Object(N.c)((function(e){return e.gameState.gameSpeed})),r=Object(N.c)((function(e){return e.gameState.linesToClear})),c=oe((function(e){return e>=1}),t),a=c.value,s=c.hasError,i=c.valueChangeHandler,u=c.blurHandler,l=c.setValue,d=oe((function(e){return e>=1}),r),j=d.value,f=d.hasError,b=d.valueChangeHandler,p=d.blurHandler,O=d.setValue,m=s?re.a.invalid:re.a.valid,g=f?re.a.invalid:re.a.valid;return Object(h.jsx)(y,{onClick:function(){n()},children:Object(h.jsxs)("div",{className:re.a.everything,children:[Object(h.jsx)("h1",{children:"Game Settings"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"Game Speed",children:"Game Speed "}),Object(h.jsx)("input",{className:m,type:"number",value:a,onChange:function(e){i(e)},onBlur:function(){u()},id:"Game Speed"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"Lines to Clear",children:"Lines to Clear "}),Object(h.jsx)("input",{className:g,type:"number",value:j,onChange:function(e){b(e)},onBlur:function(){p()},id:"Lines to Clear"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){o(ee.setSettings({linesToClear:j,gameSpeed:a}))},disabled:s||f,children:"Save"}),Object(h.jsx)("button",{onClick:function(){o(ee.setSettingsDefault()),l(t),O(r)},children:"Default"})]})]})})},ce=o(53),ae=o.n(ce),se=function(){var e=Object(i.useState)(!1),n=Object(c.a)(e,2),o=n[0],t=n[1];return Object(h.jsxs)(i.Fragment,{children:[o&&Object(h.jsx)(Ne,{onClick:function(){t(!1)}}),Object(h.jsx)("button",{className:ae.a.button,onClick:function(){t(!0)},children:"Settings"})]})},ie=o(54),ue=o.n(ie),le=o(40),de=o.n(le),je=function(e){var n=e.color,o=Object(i.useState)(!1),t=Object(c.a)(o,2),r=t[0];t[1];return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("div",{className:"".concat(de.a.block,"  ").concat(de.a[n])}),r&&Object(h.jsx)(y,{children:"Hellos"})]})},fe=o(41),be=o.n(fe),pe=function(){var e=Object(N.c)((function(e){return e.gameState.displayMessage}));return"in game"===e?Object(h.jsx)("div",{className:be.a.readyGo}):Object(h.jsx)("div",{className:be.a.readyGo,children:e})},Oe=function(){var e=Object(N.c)((function(e){return e.gameState})).grid.slice(1).map((function(e,n){return Object(h.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(h.jsx)(je,{color:e},n)}))},n)}));return Object(h.jsxs)("div",{className:ue.a.grid,children:[e,Object(h.jsx)(pe,{})]})},he=o(22),me=o.n(he),ge=function(){var e=Object(N.c)((function(e){return e.gameState.heldPiece}));if(!e)return Object(h.jsxs)("div",{className:me.a.heldBlockOuter,children:[Object(h.jsx)("div",{className:me.a.title,children:"Held Piece"}),Object(h.jsxs)("div",{className:me.a.gridRow,children:[Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{})]}),Object(h.jsxs)("div",{className:me.a.gridRow,children:[Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{})]}),Object(h.jsxs)("div",{className:me.a.gridRow,children:[Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{}),Object(h.jsx)(je,{})]})]});var n=F[e][0].map((function(n,o){return Object(h.jsx)("div",{style:{display:"flex"},children:n.map((function(n,o){return 0===n?Object(h.jsx)(je,{color:null},o):Object(h.jsx)(je,{color:e},o)}))},o)}));return Object(h.jsx)(i.Fragment,{children:Object(h.jsxs)("div",{className:me.a.heldBlockOuter,children:[Object(h.jsx)("div",{className:me.a.title,children:"Held Piece"}),Object(h.jsx)("div",{className:me.a.grid,children:n})]})})},ye=function(){var e=Object(N.c)((function(e){return e.gameState.linesCleared}));return Object(h.jsxs)("div",{children:["Lines Cleared ",e]})},ve=o(29),xe=o.n(ve),Pe=function(e){var n=F[e.color][0].map((function(n,o){return Object(h.jsx)("div",{className:xe.a.pieceRow,children:n.map((function(n,o){return 0===n?Object(h.jsx)(je,{color:null},o):Object(h.jsx)(je,{color:e.color},o)}))},o)}));return Object(h.jsx)("div",{className:xe.a.piece,children:n})},Se=function(e){Object(N.c)((function(e){return e.gameState.heldPiece}));var n=0,o=[];if(z.isEmpty)return Object(h.jsx)("div",{className:xe.a.pieceQueue});for(var t in z.elements)o.push(Object(h.jsx)(Pe,{color:z.elements[t]},n++));return Object(h.jsx)("div",{className:xe.a.pieceQueue,children:o})},Ce=function(){var e=Object(N.c)((function(e){return e.gameState.gameRunning})),n=Object(i.useState)(0),o=Object(c.a)(n,2),t=o[0],r=o[1],a=Object(i.useState)(0),s=Object(c.a)(a,2),u=s[0],l=s[1],d=Object(i.useState)(0),j=Object(c.a)(d,2),f=j[0],b=j[1];return Object(i.useEffect)((function(){var n=null;return e&&(r((function(){return 0})),l((function(){return 0})),b((function(){return 0})),n=setInterval((function(){r((function(e){return e+1}))}),10)),function(){clearInterval(n)}}),[e]),100===t&&(l(u+1),r(0)),60===u&&(b(f+1),l(0)),f?Object(h.jsx)("div",{children:"Time ".concat(f,":").concat(u,":").concat(t)}):u?Object(h.jsx)("div",{children:"Time ".concat(u,":").concat(t)}):t?Object(h.jsx)("div",{children:"Time 0:".concat(t)}):Object(h.jsx)("div",{children:"Time 0:00"})},_e=!1,Le=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.controls})),o=Object(N.c)((function(e){return e.gameState.displayMessage})),t=Object(N.c)((function(e){return e.gameState.gameRunning})),r=Object(N.c)((function(e){return e.gameState.currentGameStatus})),c=Object(N.c)((function(e){return e.gameState.gettingPiece})),a=Object(N.c)((function(e){return e.gameState.linesCleared})),s=Object(N.c)((function(e){return e.gameState.linesToClear})),u=Object(N.c)((function(e){return e.gameState.endTurn})),l=Object(N.c)((function(e){return e.gameState.gameSpeed}));Object(i.useEffect)((function(){"READY"===o&&e(ee.gettingReadySP())}),[o,e]);var d=function(){var n=Object(C.a)(Object(S.a)().mark((function n(){return Object(S.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(ee.setDisplayMessageSP("READY")),n.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:return e(ee.setDisplayMessageSP("GO")),n.next=6,new Promise((function(e){return setTimeout(e,500)}));case 6:_e=!1,e(ee.setDisplayMessageSP("in game")),e(ee.newGameSP());case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();document.onkeydown=function(e){_e||e.key===n.newGame&&(_e=!0,d())},Object(i.useEffect)((function(){"FROZEN"===r&&e(ee.clearLinesSP())}),[r,e]),Object(i.useEffect)((function(){u&&(e(ee.resetRotationSP()),a>=s?(e(ee.setGettingNewPieceSP(!1)),e(ee.gameWonSP())):e(ee.setGettingNewPieceSP(!0)))}),[a,s,e,u]),Object(i.useEffect)((function(){c&&(e(ee.getNewPieceSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()))}),[c,e]);var j=function(){var o=Object(C.a)(Object(S.a)().mark((function o(){return Object(S.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:T[n.rotateLeft]&&!D[n.rotateLeft]&&(e(ee.rotatePieceSP(!0)),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.rotateLeft]=!0),T[n.rotateRight]&&!D[n.rotateRight]&&(e(ee.rotatePieceSP(!1)),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.rotateRight]=!0),T[n.hold]&&!D[n.hold]&&(e(ee.holdPieceSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.hold]=!0),T[n.hardDrop]&&!D[n.hardDrop]&&(!0,e(ee.hardDropSP()),D[n.hardDrop]=!0),T[n.softDrop]&&!D[n.softDrop]&&(E[n.softDrop]=1,e(ee.dropPieceSP()),D[n.softDrop]=!0),T[n.moveRight]&&!D[n.moveRight]&&(E[n.moveRight]=1,e(ee.shiftRightSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.moveRight]=!0),T[n.moveLeft]&&!D[n.moveLeft]&&(E[n.moveLeft]=1,e(ee.shiftLeftSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.moveLeft]=!0);case 7:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(t){var o=setInterval((function(){e(ee.dropPieceSP())}),l),r=setInterval((function(){j()}),1),N=setInterval((function(){!function(){for(var o in E)E[o]&&(E[o]+=1);T[n.softDrop]&&D[n.softDrop]&&E[n.softDrop]>32&&(e(ee.dropPieceSP()),D[n.softDrop]=!0,E[n.softDrop]=28),T[n.moveRight]&&D[n.moveRight]&&E[n.moveRight]>32&&(e(ee.shiftRightSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.moveRight]=!0,E[n.moveRight]=28),T[n.moveLeft]&&D[n.moveLeft]&&E[n.moveLeft]>32&&(e(ee.shiftLeftSP()),e(ee.getGhostCoordsSP()),e(ee.showGhostPieceSP()),D[n.moveLeft]=!0,E[n.moveLeft]=28)}()}),1);return function(){clearInterval(o),clearInterval(r),clearInterval(N)}}}),[t,e,n]),Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(A,{}),Object(h.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",justifyContent:"center"},children:[Object(h.jsx)(ge,{}),Object(h.jsx)(Oe,{}),Object(h.jsx)(Se,{})]}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"},children:[Object(h.jsx)(Ce,{}),Object(h.jsx)(ye,{}),Object(h.jsx)(se,{})]})]})},ke=function(){return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("h2",{children:"SinglePlayer"}),Object(h.jsx)(Le,{})]})},Ge=o(55),we=o.n(Ge),Re=function(e){if(e.children)return Object(h.jsx)("div",{className:we.a.card,children:e.children})},Ie=o(21),Te=null,De=Object(l.b)({name:"UserInfo",initialState:{isLoggedIn:!1,roomStatus:null,otherUsers:[],roomKey:null,opponentName:"",opponentID:null,invitationKeys:[],grid:[],displayText:""},reducers:{reset:function(e){e.roomStatus="looking for room",e.otherUsers=[],e.roomKey=null,e.opponentName="",e.opponentID=null,e.invitationKeys=[],e.grid=[],e.myName="",Te=null},login:function(e){e.isLoggedIn=!0},logout:function(e){e.isLoggedIn=!1},setOtherUsers:function(e,n){e.otherUsers=n.payload},setRoomKey:function(e,n){e.roomKey=n.payload},setRoomStatus:function(e,n){e.roomStatus=n.payload},setOpponentName:function(e,n){e.opponentName=n.payload},setOpponentid:function(e,n){n.payload&&(Te=Object(s.a)(w,n.payload)),e.opponentID=n.payload},setInvitiationKeys:function(e,n){e.invitationKeys=n.payload},setGrid:function(e,n){e.grid=n},setDisplayText:function(e,n){e.displayText=n.payload}}}),Ee=De.actions,Ae=De.reducer,Be=o(42),Me=o.n(Be),Fe=function(e){var n=e.username,o=e.uid,t=Object(N.b)(),r=Object(Ie.c)(R),c=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ie.b)(R),e.next=3,Object(Ie.e)(r,{player1:L.currentUser.uid,player2:o,accepted:!1});case 3:t(Ee.setRoomStatus("waiting")),t(Ee.setRoomKey(r.key)),t(Ee.setOpponentName(n)),t(Ee.setOpponentid(o));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("li",{className:Me.a.OtherUser,children:Object(h.jsx)("button",{className:Me.a.OtherUser,onClick:c,children:n})})},Ke=function(){var e=Object(N.c)((function(e){return e.userInfo.otherUsers})),n=e?e.map((function(e,n){return Object(h.jsx)(Fe,{username:e[1].username,uid:e[0]},n)})):null;if(n)return Object(h.jsxs)(Re,{children:[Object(h.jsx)("div",{children:"Available Users"}),n]})},Ue=Object(i.memo)(Ke),Qe=o(43),Ze=o.n(Qe),Je=function(e){var n=e.cancelRoomHandler,o=Object(N.c)((function(e){return e.userInfo.opponentName}));Object(N.c)((function(e){return e.userInfo.roomKey}));return Object(h.jsxs)(y,{children:[Object(h.jsxs)("span",{className:Ze.a.span,children:["Waiting for ",o," to join..."]}),Object(h.jsx)("button",{className:Ze.a.cancel,onClick:n,children:"CANCEL"})]})},He=Object(i.memo)(Je),qe=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],We=function(){0===qe.length&&(qe=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"]);var e=Math.floor(qe.length*Math.random());return qe.splice(e,1)},ze=function(e,n,o,t){return F[e][n].map((function(e,n){return e.map((function(e,r){return e?{x:o+r,y:t+n}:null}))}))},Ve=function(e,n){var o,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],N=Object(M.a)(n);try{for(N.s();!(o=N.n()).done;){var c,a=o.value,s=Object(M.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i&&on(e,i,t)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){N.e(u)}finally{N.f()}return r},Xe={playerNumber:null,gameRunning:!1,myCurrentShape:null,myCurrentCoords:[],myGhostCoords:[],myPieceQueue:null,myHeldPiece:null,myLinesCleared:0,opponentPieceQueue:[],opponentHeldPiece:null,opponentLinesCleared:0,currentGameStatus:"NONE",rotatePos:0,xPos:3,yPos:0,grid:[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],rotated:!1,displayMessage:"",myTurn:null,linesToClear:15,lineDeduction:2,keepTurn:0,keepTurn2:!1,turnTaken:!1},Ye=null,$e=new Q,en=function(e){var n,o=Object(M.a)(e.myCurrentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}},nn=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.grid.map((function(e){return e.slice()}));if(n){var t,r=e.myCurrentShape+"ghost",N=Object(M.a)(e.myGhostCoords);try{for(N.s();!(t=N.n()).done;){var c=t.value;o[c.y][c.x]=r;var a,s=Object(M.a)(e.myCurrentCoords);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.y===c.y&&i.x===c.x&&(o[c.y][c.x]=e.myCurrentShape)}}catch(j){s.e(j)}finally{s.f()}}}catch(j){N.e(j)}finally{N.f()}}else{var u,l=Object(M.a)(e.myCurrentCoords);try{for(l.s();!(u=l.n()).done;){var d=u.value;o[d.y][d.x]=e.myCurrentShape}}catch(j){l.e(j)}finally{l.f()}}e.grid=o},on=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&n.y<=20&&n.x>=0&&n.x<=9){var t,r=Object(M.a)(e.myCurrentCoords);try{for(r.s();!(t=r.n()).done;){var N=t.value;if(o&&N.y===n.y&&N.x===n.x)return!0}}catch(c){r.e(c)}finally{r.f()}if(e.grid[n.y][n.x].length>1)return!0}return!1},tn=Object(l.b)({name:"gameState2",initialState:Xe,reducers:{reset:function(e){e.playerNumber=null,e.gameRunning=!1,e.myCurrentShape=null,e.myCurrentCoords=[],e.myGhostCoords=[],e.myPieceQueue=null,e.myHeldPiece=null,e.myLinesCleared=0,e.opponentPieceQueue=[],e.opponentHeldPiece=null,e.opponentLinesCleared=0,e.currentGameStatus="NONE",e.rotatePos=0,e.xPos=3,e.yPos=0,e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.rotated=!1,e.displayMessage="",e.keepTurn=0,e.keepTurn2=!1,e.myTurn=null,e.linesToClear=15,e.lineDeduction=Math.floor(3),Ye=null,$e=new Q,e.turnTaken=!1},setGrid:function(e,n){e.grid=n.payload},gettingReady:function(e){e.myCurrentShape=null,e.myCurrentCoords=[],e.myGhostCoords=[],e.myPieceQueue=null,e.myHeldPiece=null,e.myLinesCleared=0,e.currentGameStatus="NONE",e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]]},newGame:function(e){e.xPos=3,e.yPos=0,e.rotatePos=0,qe=["I","I","T","T","L","L","J","J","Z","Z","S","S","O","O"],$e=new Q;for(var n=0;n<5;n++){var o;(o=$e).enqueue.apply(o,Object(B.a)(We()))}},setOpponentInfo:function(e,n){e.opponentPieceQueue=n.payload.opponentPieceQueue,e.opponentLinesCleared=n.payload.opponentLinesCleared},clearLines:function(e){var n,o=[],t=0,r=Object(M.a)(e.grid);try{for(r.s();!(n=r.n()).done;){var N=n.value;N.every((function(e){return"None"!==e}))?(e.myLinesCleared+=1,t+=1):o.push(N)}}catch(a){r.e(a)}finally{r.f()}for(var c=0;c<t;c++)o.unshift(["None","None","None","None","None","None","None","None","None","None"]);e.grid=o,Object(s.l)(Object(s.a)(Ye,"grid"),e.grid),t>0?(e.keepTurn=e.keepTurn+1,e.keepTurn2=!0):e.keepTurn2=!1},unfreeze:function(e){e.currentGameStatus="FALLING"},getNewPiece:function(e,n){var o,t;(e.myGhostCoords=[],e.myCurrentShape=$e.dequeue(),(o=$e).enqueue.apply(o,Object(B.a)(We())),e.xPos=3,e.yPos=0,e.rotatePos=0,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4)&&(e.grid=[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]],e.myCurrentShape=$e.dequeue(),(t=$e).enqueue.apply(t,Object(B.a)(We())),Object(s.d)(Object(s.a)(Ye,"player".concat(1===e.playerNumber?2:1,"GameInfo"))),Object(s.l)(Object(s.a)(Ye,"player".concat(1===e.playerNumber?2:1,"GameInfo/linesCleared")),e.opponentLinesCleared-e.lineDeduction),Object(s.d)(Object(s.a)(Ye,"displayMessage")),e.displayMessage="".concat(n.payload," CAUSED OVERFLOW"),Object(s.l)(Object(s.a)(Ye,"displayMessage"),"".concat(n.payload," CAUSED OVERFLOW")),setTimeout((function(){Object(s.l)(Object(s.a)(Ye,"displayMessage"),"in game")}),1e3),e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)));nn(e),e.currentGameStatus="FALLING"},rotatePiece:function(e,n){var o=e.rotatePos;e.rotatePos=function(e,n){var o=n.rotatePos;return e?0===o?3:o-1:3===o?0:o+1}(n.payload,{rotatePos:e.rotatePos}),en(e),e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.rotatePos=o,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",nn(e)},dropPiece:function(e){if(e.gameRunning){if("LANDING"===e.currentGameStatus)return void(e.currentGameStatus="FROZEN");en(e),e.yPos+=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.yPos-=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.currentGameStatus="LANDING"):e.currentGameStatus="FALLING",nn(e)}},getGhostCoords:function(e){!function(e){var n,o=Object(M.a)(e.myGhostCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.grid[t.y][t.x]="None"}}catch(r){o.e(r)}finally{o.f()}}(e),e.myGhostCoords=[];var n,o=Object(M.a)(e.myCurrentCoords);try{for(o.s();!(n=o.n()).done;){var t=n.value;e.myGhostCoords.push({x:t.x,y:t.y})}}catch(N){o.e(N)}finally{o.f()}for(var r=e.yPos;4===e.myGhostCoords.length;)r+=1,e.myGhostCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,r),!0);r-=1,e.myGhostCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,r),!0)},hardDrop:function(e){en(e),e.myCurrentCoords=e.myGhostCoords,nn(e),e.currentGameStatus="FROZEN"},showGhostPiece:function(e){nn(e,!0)},shiftLeft:function(e){en(e),e.xPos-=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.xPos+=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",nn(e)},shiftRight:function(e){en(e),e.xPos+=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos)),e.myCurrentCoords.length<4?(e.xPos-=1,e.myCurrentCoords=Ve(e,ze(e.myCurrentShape,e.rotatePos,e.xPos,e.yPos))):e.currentGameStatus="FALLING",nn(e)},placeCurrentPiece:function(e){nn(e)},gameWon:function(e){e.gameRunning=!1},holdPiece:function(e){if(!0!==e.rotated){if(e.rotated=!0,en(e),null===e.heldPiece){var n;e.heldPiece=e.currentShape,e.currentShape=$e.dequeue(),(n=$e).enqueue.apply(n,Object(B.a)(We()))}else{var o=e.currentShape;e.currentShape=e.heldPiece,e.heldPiece=o}e.xPos=3,e.yPos=0,e.rotatePos=0,e.currentCoords=Ve(e,ze(e.currentShape,e.rotatePos,e.xPos,e.yPos)),nn(e),e.currentPieceState="FALLING"}},setMultiplayer:function(e,n){e.playerNumber=n.payload.playerNumber,Ye=n.payload.roomRef},setDisplayMessage:function(e,n){e.displayMessage=n.payload,"in game"===e.displayMessage&&(e.gameRunning=!0),e.displayMessage.includes("WON")&&(e.gameRunning=!1)},setMyTurn:function(e,n){e.myTurn=n.payload},setMyLinesCleared:function(e,n){e.myLinesCleared=n.payload},setLinesToClear:function(e,n){e.linesToClear=n.payload,e.lineDeduction=Math.floor(n.payload/5)},setTurnTaken:function(e,n){e.turnTaken=n.payload}}}),rn=tn.actions,Nn=tn.reducer,cn=o(35),an=o.n(cn),sn=function(e){var n=e.roomKey,o=e.opponentuid,t=Object(N.b)(),r=Object(i.useState)(null),a=Object(c.a)(r,2),u=a[0],l=a[1],d=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,I(o);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.l)(Object(s.a)(R,n+"/accepted"),!0);case 2:return e.next=4,Object(s.l)(Object(s.a)(R,n+"/displayMessage"),"");case 4:return t(Ee.setOpponentid(o)),t(Ee.setRoomStatus("in room")),t(Ee.setRoomKey(n)),t(Ee.setOpponentName(u)),t(rn.setMultiplayer({playerNumber:2,roomRef:Object(s.a)(R,n)})),e.next=11,Object(s.l)(Object(s.a)(w,L.currentUser.uid+"/inRoom"),!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.l)(Object(s.a)(R,n+"/accepted"),"declined");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d(),Object(h.jsxs)("div",{className:an.a.invite,children:[Object(h.jsx)("span",{children:u}),Object(h.jsx)("span",{children:" sent you an invite"}),Object(h.jsx)("button",{className:an.a.accept,onClick:j,children:"ACCEPT"}),Object(h.jsx)("button",{className:an.a.decline,onClick:f,children:"DECLINE"})]})},un=function(){var e=Object(N.c)((function(e){return e.userInfo.invitationKeys}));return 0!==e.length&&(e=e.map((function(e,n){var o=e.roomKey,t=e.opponentuid;return Object(h.jsx)(sn,{roomKey:o,opponentuid:t},n)}))),Object(h.jsxs)(Re,{children:[Object(h.jsx)("p",{style:{margin:0},children:"Room Invitations"}),e]})},ln=Object(i.memo)(un),dn=o(56),jn=o.n(dn),fn=o(44),bn=o.n(fn),pn=function(e){var n=e.color;return Object(h.jsx)("div",{className:"".concat(bn.a.block,"  ").concat(bn.a[n])})},On=o(45),hn=o.n(On),mn=function(){var e=Object(N.c)((function(e){return e.gameState2.displayMessage}));return"in game"===e?Object(h.jsx)("div",{className:hn.a.readyGo}):Object(h.jsx)("div",{className:hn.a.readyGo,children:e})},gn=Object(i.memo)(mn),yn=function(){var e=Object(N.c)((function(e){return e.gameState2})).grid.slice(1).map((function(e,n){return Object(h.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(h.jsx)(pn,{color:e},n)}))},n)}));return Object(h.jsxs)("div",{className:jn.a.grid,children:[e,Object(h.jsx)(gn,{})]})},vn={I:[[[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],T:[[[0,1,0],[1,1,1]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],L:[[[0,0,1],[1,1,1]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]],J:[[[1,0,0],[1,1,1]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]]],S:[[[0,1,1],[1,1,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]]],O:[[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]],[[0,1,1],[0,1,1]]]},xn=o(23),Pn=o.n(xn),Sn=function(e){var n=vn[e.color][0].map((function(n,o){return Object(h.jsx)("div",{className:Pn.a.pieceRow,children:n.map((function(n,o){return 0===n?Object(h.jsx)(pn,{color:null},o):Object(h.jsx)(pn,{color:e.color},o)}))},o)}));return Object(h.jsx)("div",{className:Pn.a.piece,children:n})},Cn=function(e){var n=e.player,o=Object(N.c)((function(e){return e.gameState2.opponentPieceQueue})),t=(Object(N.c)((function(e){return e.gameState2.myTurn})),0),r=[];if("mine"===n){if($e.isEmpty)return Object(h.jsx)("div",{className:Pn.a.pieceQueue});for(var c in $e.elements)r.push(Object(h.jsx)(Sn,{color:$e.elements[c]},t++));return Object(h.jsx)(i.Fragment,{children:Object(h.jsx)("div",{className:Pn.a.pieceQueue,children:r})})}if("opponent"===n){if(!o||o.isEmpty)return Object(h.jsx)("div",{className:Pn.a.pieceQueue});for(var a in o)a&&r.push(Object(h.jsx)(Sn,{color:o[a]},t++));return Object(h.jsx)(i.Fragment,{children:Object(h.jsx)("div",{className:Pn.a.pieceQueue,children:r})})}},_n=o(46),Ln=o.n(_n),kn=function(e){var n=e.player,o=Object(N.c)((function(e){return e.gameState2.opponentLinesCleared})),t=Object(N.c)((function(e){return e.gameState2.myLinesCleared}));return"opponent"===n?Object(h.jsx)("div",{className:Ln.a.counterOpponent,children:o}):"mine"===n?Object(h.jsx)("div",{className:Ln.a.counterMyself,children:t}):void 0},Gn=Object(i.memo)(kn),wn=function(){var e=Object(N.c)((function(e){return e.gameState2.gameRunning})),n=Object(N.c)((function(e){return e.gameState2.myTurn})),o=Object(N.c)((function(e){return e.userInfo.opponentName}));return e?n?Object(h.jsx)("div",{style:{textAlign:"center"},children:"Your Turn"}):Object(h.jsx)("div",{style:{textAlign:"center"},children:"".concat(o,"'s Turn")}):Object(h.jsx)("div",{style:{textAlign:"center",height:"24px"},children:" "})},Rn=Object(i.memo)(wn),In=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.gameState2.linesToClear})),o=Object(i.useState)(n),t=Object(c.a)(o,2),r=t[0],a=t[1];return Object(s.h)(Object(s.a)(Ye,"linesToClear"),(function(n){n.exists()&&e(rn.setLinesToClear(n.val()))})),Object(h.jsxs)(Re,{children:[Object(h.jsx)("label",{id:"lines",children:"Lines to Clear "}),Object(h.jsx)("input",{id:"lines",type:"number",value:r,onChange:function(e){e.target.value<=0||a(+e.target.value)}}),Object(h.jsx)("button",{onClick:function(){Object(s.d)(Object(s.a)(Ye,"linesToClear")),e(rn.setLinesToClear(r)),Object(s.l)(Object(s.a)(Ye,"linesToClear"),r)},children:"SET"}),Object(h.jsxs)("span",{children:[" Current amount is ",n]})]})},Tn=!1,Dn=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.controls})),o=Object(N.c)((function(e){return e.gameState2.playerNumber})),t=Object(N.c)((function(e){return e.userInfo.opponentName})),r=Object(N.c)((function(e){return e.gameState2.myTurn})),c=Object(N.c)((function(e){return e.gameState2.gameRunning})),a=Object(N.c)((function(e){return e.gameState2.keepTurn})),u=Object(N.c)((function(e){return e.gameState2.grid}));Object(i.useEffect)((function(){if(c&&r){Object(s.d)(Object(s.a)(Ye,"grid")),e(rn.getNewPiece(t)),Object(s.l)(Object(s.a)(Ye,"player".concat(o,"GameInfo/gameQueue")),$e.elements),e(rn.placeCurrentPiece()),e(rn.getGhostCoords()),e(rn.showGhostPiece());var n=setInterval((function(){j()}),300),N=setInterval((function(){d()}),1),a=setInterval((function(){l()}),1);return function(){clearInterval(n),clearInterval(N),clearInterval(a)}}}),[r,c,e,a]);var l=function(){var o=Object(C.a)(Object(S.a)().mark((function o(){var t;return Object(S.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(t in E)E[t]&&(E[t]+=1);T[n.softDrop]&&D[n.softDrop]&&E[n.softDrop]>40&&(e(rn.dropPiece()),D[n.softDrop]=!0,E[n.softDrop]=30),T[n.moveRight]&&D[n.moveRight]&&E[n.moveRight]>40&&(e(rn.shiftRight()),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.moveRight]=!0,E[n.moveRight]=30),T[n.moveLeft]&&D[n.moveLeft]&&E[n.moveLeft]>40&&(e(rn.shiftLeft()),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.moveLeft]=!0,E[n.moveLeft]=30);case 4:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),d=function(){var o=Object(C.a)(Object(S.a)().mark((function o(){return Object(S.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c&&!Tn){o.next=2;break}return o.abrupt("return");case 2:T[n.rotateLeft]&&!D[n.rotateLeft]&&(e(rn.rotatePiece(!0)),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.rotateLeft]=!0),T[n.rotateRight]&&!D[n.rotateRight]&&(e(rn.rotatePiece(!1)),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.rotateRight]=!0),T[n.hardDrop]&&!D[n.hardDrop]&&(Tn=!0,e(rn.hardDrop()),D[n.hardDrop]=!0,setTimeout((function(){Tn=!1}),400)),T[n.softDrop]&&!D[n.softDrop]&&(E[n.softDrop]=1,e(rn.dropPiece()),D[n.softDrop]=!0),T[n.moveRight]&&!D[n.moveRight]&&(E[n.moveRight]=1,e(rn.shiftRight()),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.moveRight]=!0),T[n.moveLeft]&&!D[n.moveLeft]&&(E[n.moveLeft]=1,e(rn.shiftLeft()),e(rn.getGhostCoords()),e(rn.showGhostPiece()),D[n.moveLeft]=!0);case 8:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),j=function(){var n=Object(C.a)(Object(S.a)().mark((function n(){return Object(S.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(rn.dropPiece()),e(rn.getGhostCoords()),e(rn.showGhostPiece());case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){r&&Object(s.l)(Object(s.a)(Ye,"grid"),u)}),[u,r])},En=!1,An=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.controls})),o=Object(N.c)((function(e){return e.gameState2.playerNumber})),t=(Object(N.c)((function(e){return e.userInfo.opponentName})),Object(N.c)((function(e){return e.gameState2.myTurn}))),r=Object(N.c)((function(e){return e.gameState2.displayMessage})),c=Object(N.c)((function(e){return e.gameState2.gameRunning})),a=Object(N.c)((function(e){return e.gameState2.currentGameStatus})),u=Object(N.c)((function(e){return e.gameState2.myLinesCleared})),l=Object(N.c)((function(e){return e.gameState2.linesToClear})),d=Object(N.c)((function(e){return e.gameState2.turnTaken})),j=Object(N.c)((function(e){return e.gameState2.keepTurn2}));r||(En=!1),r.includes("WON")&&setTimeout((function(){En=!1}),1e3),"FROZEN"===a&&(e(rn.unfreeze()),e(rn.clearLines()),e(rn.setTurnTaken(!0))),Object(i.useEffect)((function(){d&&(u>=l?(Object(s.l)(Object(s.a)(Ye,"turn"),null),I(L.currentUser.uid).then((function(e){Object(s.l)(Object(s.a)(Ye,"displayMessage"),"".concat(e," WON"))})),e(rn.gameWon())):j||Object(s.l)(Object(s.a)(Ye,"turn"),1===o?2:1)),e(rn.setTurnTaken(!1))}),[u,l,e,d,j]),Object(i.useEffect)((function(){if(c)return Object(s.d)(Object(s.a)(Ye,"player".concat(1===o?2:1,"GameInfo"))),e(rn.newGame()),Object(s.l)(Object(s.a)(Ye,"player".concat(o,"GameInfo")),{gameQueue:$e.elements,linesCleared:u}),function(){}}),[c]),Object(i.useEffect)((function(){Object(s.l)(Object(s.a)(Ye,"player".concat(o,"GameInfo")),{gameQueue:$e.elements,linesCleared:u})}),[u,$e.elements]);var f=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(s.l)(Object(s.a)(Ye,"displayMessage"),"READY"),e.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:return Object(s.l)(Object(s.a)(Ye,"displayMessage"),"GO"),e.next=6,new Promise((function(e){return setTimeout(e,500)}));case 6:return e.next=8,Object(s.l)(Object(s.a)(Ye,"displayMessage"),"in game");case 8:return e.next=10,Object(s.l)(Object(s.a)(Ye,"grid"),[["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"],["None","None","None","None","None","None","None","None","None","None"]]);case 10:return e.next=12,Object(s.l)(Object(s.a)(Ye,"/turn"),1===o?2:1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.g)(Object(s.a)(w,L.currentUser.uid+"/inRoom")).set(!1),Object(i.useEffect)((function(){Object(s.h)(Object(s.a)(Ye,"displayMessage"),(function(n){n.exists()&&(e(rn.setDisplayMessage(n.val())),"READY"===n.val()&&(e(rn.gettingReady()),Object(s.l)(Object(s.a)(Ye,"player".concat(o,"GameInfo")),{gameQueue:$e.elements,linesCleared:u}),En=!0))}))})),c&&!t&&Object(s.h)(Object(s.a)(Ye,"grid"),(function(n){n.exists()&&e(rn.setGrid(n.val()))})),c&&!t&&Object(s.h)(Object(s.a)(Ye,"player".concat(o,"GameInfo/linesCleared")),(function(n){e(rn.setMyLinesCleared(n.val()))})),Object(s.h)(Object(s.a)(Ye,"player".concat(1===o?2:1,"GameInfo")),(function(n){n.exists()&&e(rn.setOpponentInfo({opponentPieceQueue:n.val().gameQueue,opponentLinesCleared:n.val().linesCleared}))})),Object(s.h)(Object(s.a)(Ye,"turn"),(function(n){n.exists()&&e(rn.setMyTurn(n.val()===o))})),document.onkeydown=function(e){" "===e.key&&e.preventDefault(),En||e.key===n.newGame&&(En=!0,f())},Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(A,{}),Object(h.jsx)(Dn,{}),Object(h.jsx)(Rn,{}),Object(h.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",justifyContent:"center"},children:[Object(h.jsx)(Gn,{player:"opponent"}),Object(h.jsx)(Cn,{player:"opponent"}),Object(h.jsx)(yn,{}),Object(h.jsx)(Cn,{player:"mine"}),Object(h.jsx)(Gn,{player:"mine"})]}),!c&&Object(h.jsx)(In,{}),Object(h.jsx)(Re,{children:Object(h.jsxs)("div",{style:{color:"yellow"},children:[Object(h.jsx)("p",{children:"How To Play:"}),Object(h.jsx)("p",{children:"Press esc to start."}),Object(h.jsx)("p",{children:"Game starts with other person first."}),Object(h.jsx)("p",{children:"After player drops piece, other player goes."}),Object(h.jsx)("p",{children:"Person that causes the board to overflow loses a line point."}),Object(h.jsx)("p",{children:"Play until a person clears an amount of lines."})]})})]})},Bn=Object(i.memo)(An),Mn=o(57),Fn=o.n(Mn),Kn=function(e){var n=e.leaveRoomHandler;return Object(h.jsx)("button",{className:Fn.a["leave-room"],onClick:n,children:"Leave Room"})},Un=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.userInfo.roomStatus})),o=Object(N.c)((function(e){return e.userInfo.isLoggedIn})),t=Object(N.c)((function(e){return e.gameState2.playerNumber})),r=Object(N.c)((function(e){return e.userInfo.roomKey}));r&&Object(s.g)(Object(s.a)(R,r)).remove(),Object(s.h)(w,(function(){L.currentUser&&Object(s.b)(w).then((function(n){n.val()&&e(Ee.setOtherUsers(Object.entries(n.val()).filter((function(e){return e[0]!==L.currentUser.uid&&!e[1].inRoom}))))}))})),r&&Object(s.h)(Object(s.a)(R,r+"/accepted"),(function(n){n.exists()&&(!0===n.val()?2!==t&&(e(rn.setMultiplayer({playerNumber:1,roomRef:Object(s.a)(R,r)})),e(Ee.setRoomStatus("in room")),Object(s.l)(Object(s.a)(w,L.currentUser.uid+"/inRoom"),!0)):"declined"===n.val()?a():e(Ee.setRoomStatus("waiting")))})),Object(s.e)(R,(function(){L.currentUser&&Object(s.b)(R).then((function(n){n.exists()&&e(Ee.setInvitiationKeys(Object.entries(n.val()).filter((function(e){return!e[1].accepted&&e[1].player2===L.currentUser.uid})).map((function(e){return{opponentuid:e[1].player1,roomKey:e[0]}}))))}))})),Object(s.f)(R,(function(){L.currentUser&&Object(s.b)(R).then((function(n){n.exists()?e(Ee.setInvitiationKeys(Object.entries(n.val()).filter((function(e){return!e[1].accepted&&e[1].player2===L.currentUser.uid})).map((function(e){return{opponentuid:e[1].player1,roomKey:e[0]}})))):e(Ee.setInvitiationKeys([]))}))}));var c=Object(N.c)((function(e){return e.userInfo.opponentID})),a=function(){var n=Object(C.a)(Object(S.a)().mark((function n(){return Object(S.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(s.d)(Object(s.a)(w,c)),e(rn.reset()),n.next=4,Object(s.k)(Object(s.a)(R,r));case 4:e(Ee.reset()),L.currentUser&&Object(s.l)(Object(s.a)(w,L.currentUser.uid+"/inRoom"),!1);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return c&&Object(s.h)(Object(s.a)(w,c),function(){var e=Object(C.a)(Object(S.a)().mark((function e(n){var o;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.exists()){e.next=4;break}a(),e.next=9;break;case 4:if(!n.val().inRoom){e.next=9;break}return o=!1,e.next=8,Object(s.b)(Object(s.a)(Ye,"accepted")).then((function(e){o=e.val()}));case 8:o||a();case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),"in room"===n&&Object(s.h)(Ye,(function(n){n.exists()||(Object(s.d)(Object(s.a)(R,r)),Object(s.d)(Object(s.a)(w,c)),e(Ee.reset()),L.currentUser&&Object(s.l)(Object(s.a)(w,L.currentUser.uid+"/inRoom"),!1),e(rn.reset()))})),Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("h2",{children:"Two-Player"}),!o&&Object(h.jsx)("p",{children:"Login to begin"}),"looking for room"===n&&Object(h.jsx)(ln,{}),"looking for room"===n&&Object(h.jsx)(Ue,{}),"waiting"===n&&Object(h.jsx)(He,{cancelRoomHandler:a}),"in room"===n&&Object(h.jsx)(Kn,{leaveRoomHandler:a}),"in room"===n&&Object(h.jsx)(Bn,{})]})},Qn=o(47),Zn=o(32),Jn=o.n(Zn),Hn=function(){var e=Object(N.c)((function(e){return e.userInfo.isLoggedIn})),n=Object(i.useState)(!1),o=Object(c.a)(n,2),t=o[0],r=o[1],a=Object(i.useState)(""),s=Object(c.a)(a,2),u=s[0],l=s[1],d=Object(i.useState)(!1),j=Object(c.a)(d,2),f=j[0],b=j[1],p=function(){var e=Object(C.a)(Object(S.a)().mark((function e(n){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!==u.trim().length){e.next=5;break}b(!0),e.next=11;break;case 5:return e.next=7,Object(Qn.a)(L);case 7:return e.next=9,Object(Ie.e)(Object(Ie.a)(w,L.currentUser.uid),{username:u,inRoom:!1});case 9:l(""),b(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=Object(C.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(!1),Object(Ie.d)(Object(Ie.a)(w,L.currentUser.uid)),Ye&&Object(Ie.d)(Ye),Object(Qn.b)(L);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(h.jsx)("p",{children:"Invalid Username"});return e?Object(h.jsx)("li",{className:Jn.a.login,onClick:O,children:"Logout"}):Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)("li",{className:Jn.a.login,onClick:function(){r(!0)},children:"Login"}),t&&Object(h.jsxs)(y,{onClick:function(){r(!1)},children:[Object(h.jsxs)("form",{className:Jn.a.login,onSubmit:p,children:[Object(h.jsx)("label",{htmlFor:"name",children:"Username: "}),Object(h.jsx)("input",{id:"name",value:u,onChange:function(e){l(e.target.value)}}),Object(h.jsx)("button",{children:"Login"})]}),f&&Object(h.jsx)("div",{className:Jn.a["error-text"],children:m})]})]})},qn=Object(i.memo)(Hn),Wn=o(58),zn=o.n(Wn),Vn=function(e){var n=e.setPage,o=e.setShowKeyBindings;return Object(h.jsxs)("ul",{className:zn.a["nav-bar"],children:[Object(h.jsx)("div",{children:"Ditris"}),Object(h.jsx)("li",{onClick:function(){n("singleplayer")},children:"SinglePlayer"}),Object(h.jsx)("li",{onClick:function(){n("two-player")},children:"Two-Player"}),Object(h.jsx)(qn,{}),Object(h.jsx)("li",{onClick:function(){o(!0)},style:{float:"right"},children:"Set Controls"})]})},Xn=function(){var e=Object(N.b)(),n=Object(N.c)((function(e){return e.userInfo.isLoggedIn})),o=Object(i.useState)(Object(h.jsx)(ke,{})),t=Object(c.a)(o,2),r=t[0],l=t[1],d=Object(i.useState)(!1),j=Object(c.a)(d,2),f=j[0],b=j[1];return Object(a.b)(L,(function(o){n||(o?(e(Ee.login()),e(Ee.reset()),e(Ee.setRoomStatus("looking for room"))):(e(Ee.logout()),Te&&Object(s.d)(Te),e(Ee.reset())))})),Object(h.jsxs)(u.a.Fragment,{children:[Object(h.jsx)(Vn,{setPage:function(n){"singleplayer"===n?(e(ee.resetSP()),l(Object(h.jsx)(ke,{}))):"two-player"===n&&(Ye&&Object(s.k)(Ye),e(rn.reset()),l(Object(h.jsx)(Un,{})))},setShowKeyBindings:b}),r,f&&Object(h.jsx)(P,{setShowKeyBindings:b})]})},Yn=Object(l.a)({reducer:{gameState:ne,userInfo:Ae,gameState2:Nn,controls:f}});r.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(N.a,{store:Yn,children:Object(h.jsx)(Xn,{})}))}},[[73,1,2]]]);
//# sourceMappingURL=main.7ed96666.chunk.js.map