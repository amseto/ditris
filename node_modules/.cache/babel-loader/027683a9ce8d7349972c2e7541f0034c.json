{"ast":null,"code":"import _regeneratorRuntime from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{child,set}from\"@firebase/database\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{auth,getUsernameFromuid,myRoomRef,onlineUsersRef,roomsRef}from\"../../modules/firebase-config\";import{gameStateActions2}from\"../../store/GameState2\";import{userInfoActions}from\"../../store/UserInfo\";import{jsx as _jsx}from\"react/jsx-runtime\";var InviteNotfication=function InviteNotfication(_ref){var roomKey=_ref.roomKey,opponentuid=_ref.opponentuid;var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),opponentName=_useState2[0],setOpponentName=_useState2[1];var getOpponentName=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setOpponentName;_context.next=3;return getUsernameFromuid(opponentuid);case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getOpponentName(){return _ref2.apply(this,arguments);};}();var acceptInvite=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return set(child(roomsRef,roomKey+\"/accepted\"),true);case 2:_context2.next=4;return set(child(roomsRef,roomKey+\"/displayMessage\"),\"\");case 4:dispatch(userInfoActions.setOpponentid(opponentuid));dispatch(userInfoActions.setRoomStatus(\"in room\"));dispatch(userInfoActions.setRoomKey(roomKey));dispatch(userInfoActions.setOpponentName(opponentName));dispatch(gameStateActions2.setMultiplayer({playerNumber:2,roomRef:child(roomsRef,roomKey)}));_context2.next=11;return set(child(onlineUsersRef,auth.currentUser.uid+\"/inRoom\"),true);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function acceptInvite(){return _ref3.apply(this,arguments);};}();getOpponentName();return/*#__PURE__*/_jsx(\"button\",{onClick:acceptInvite,children:opponentName});};export default InviteNotfication;","map":{"version":3,"names":["child","set","useState","useDispatch","auth","getUsernameFromuid","myRoomRef","onlineUsersRef","roomsRef","gameStateActions2","userInfoActions","InviteNotfication","roomKey","opponentuid","dispatch","opponentName","setOpponentName","getOpponentName","acceptInvite","setOpponentid","setRoomStatus","setRoomKey","setMultiplayer","playerNumber","roomRef","currentUser","uid"],"sources":["/Users/albert/Desktop/-/src/Components/Multiplayer/InviteNotifcation.js"],"sourcesContent":["import { child, set } from \"@firebase/database\";\nimport { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { auth, getUsernameFromuid, myRoomRef, onlineUsersRef, roomsRef } from \"../../modules/firebase-config\";\nimport { gameStateActions2 } from \"../../store/GameState2\";\nimport { userInfoActions } from \"../../store/UserInfo\";\n\nconst InviteNotfication = ({ roomKey, opponentuid }) => {\n   const dispatch = useDispatch();\n   const [opponentName, setOpponentName] = useState(null);\n   const getOpponentName = async () => {\n      setOpponentName(await getUsernameFromuid(opponentuid));\n   };\n\n   const acceptInvite = async() => {\n      await set(child(roomsRef, roomKey + \"/accepted\"), true);\n      await set(child(roomsRef,roomKey + \"/displayMessage\"),\"\")\n      dispatch(userInfoActions.setOpponentid(opponentuid))\n      dispatch(userInfoActions.setRoomStatus(\"in room\"));\n      dispatch(userInfoActions.setRoomKey(roomKey))\n      dispatch(userInfoActions.setOpponentName(opponentName))\n      dispatch(\n         gameStateActions2.setMultiplayer({ playerNumber: 2, roomRef: child(roomsRef, roomKey) })\n      );\n      await set(child(onlineUsersRef,auth.currentUser.uid+\"/inRoom\"),true)\n   };\n\n   getOpponentName();\n   return <button onClick={acceptInvite}>{opponentName}</button>;\n};\n\nexport default InviteNotfication;\n"],"mappings":"uVAAA,OAASA,KAAT,CAAgBC,GAAhB,KAA2B,oBAA3B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,IAAT,CAAeC,kBAAf,CAAmCC,SAAnC,CAA8CC,cAA9C,CAA8DC,QAA9D,KAA8E,+BAA9E,CACA,OAASC,iBAAT,KAAkC,wBAAlC,CACA,OAASC,eAAT,KAAgC,sBAAhC,C,2CAEA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,MAA8B,IAA3BC,QAA2B,MAA3BA,OAA2B,CAAlBC,WAAkB,MAAlBA,WAAkB,CACrD,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CACA,cAAwCD,QAAQ,CAAC,IAAD,CAAhD,wCAAOa,YAAP,eAAqBC,eAArB,eACA,GAAMC,gBAAe,6FAAG,iJACrBD,eADqB,uBACCX,mBAAkB,CAACQ,WAAD,CADnB,qHAAH,kBAAfI,gBAAe,2CAArB,CAIA,GAAMC,aAAY,6FAAG,iKACZjB,IAAG,CAACD,KAAK,CAACQ,QAAD,CAAWI,OAAO,CAAG,WAArB,CAAN,CAAyC,IAAzC,CADS,+BAEZX,IAAG,CAACD,KAAK,CAACQ,QAAD,CAAUI,OAAO,CAAG,iBAApB,CAAN,CAA6C,EAA7C,CAFS,QAGlBE,QAAQ,CAACJ,eAAe,CAACS,aAAhB,CAA8BN,WAA9B,CAAD,CAAR,CACAC,QAAQ,CAACJ,eAAe,CAACU,aAAhB,CAA8B,SAA9B,CAAD,CAAR,CACAN,QAAQ,CAACJ,eAAe,CAACW,UAAhB,CAA2BT,OAA3B,CAAD,CAAR,CACAE,QAAQ,CAACJ,eAAe,CAACM,eAAhB,CAAgCD,YAAhC,CAAD,CAAR,CACAD,QAAQ,CACLL,iBAAiB,CAACa,cAAlB,CAAiC,CAAEC,YAAY,CAAE,CAAhB,CAAmBC,OAAO,CAAExB,KAAK,CAACQ,QAAD,CAAWI,OAAX,CAAjC,CAAjC,CADK,CAAR,CAPkB,wBAUZX,IAAG,CAACD,KAAK,CAACO,cAAD,CAAgBH,IAAI,CAACqB,WAAL,CAAiBC,GAAjB,CAAqB,SAArC,CAAN,CAAsD,IAAtD,CAVS,0DAAH,kBAAZR,aAAY,2CAAlB,CAaAD,eAAe,GACf,mBAAO,eAAQ,OAAO,CAAEC,YAAjB,UAAgCH,YAAhC,EAAP,CACF,CAtBD,CAwBA,cAAeJ,kBAAf"},"metadata":{},"sourceType":"module"}