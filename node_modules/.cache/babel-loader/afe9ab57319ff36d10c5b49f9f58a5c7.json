{"ast":null,"code":"import _regeneratorRuntime from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{signInAnonymously,signOut}from\"firebase/auth\";import{child,remove,set}from\"firebase/database\";import{memo,useState}from\"react\";import{useSelector}from\"react-redux\";import{auth,onlineUsersRef}from\"../../modules/firebase-config\";import{myRoomRef}from\"../../store/GameState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var isLoggedIn=useSelector(function(state){return state.userInfo.isLoggedIn;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),usernameInput=_useState2[0],setUsernameInput=_useState2[1];var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return signInAnonymously(auth);case 3:set(child(onlineUsersRef,auth.currentUser.uid),{username:usernameInput,inRoom:false});setUsernameInput(\"\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();var logoutHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:remove(child(onlineUsersRef,auth.currentUser.uid));if(myRoomRef){remove(myRoomRef);}signOut(auth);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function logoutHandler(){return _ref2.apply(this,arguments);};}();if(!isLoggedIn){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginHandler,children:[/*#__PURE__*/_jsx(\"label\",{id:\"name\",children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",value:usernameInput,onChange:function onChange(event){setUsernameInput(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]});}else{return/*#__PURE__*/_jsx(\"button\",{onClick:logoutHandler,children:\"Logout\"});}};export default/*#__PURE__*/memo(Login);","map":{"version":3,"names":["signInAnonymously","signOut","child","remove","set","memo","useState","useSelector","auth","onlineUsersRef","myRoomRef","Login","isLoggedIn","state","userInfo","usernameInput","setUsernameInput","loginHandler","event","preventDefault","currentUser","uid","username","inRoom","logoutHandler","target","value"],"sources":["/Users/albert/Desktop/-/src/Components/Multiplayer/Login.js"],"sourcesContent":["import { signInAnonymously, signOut } from \"firebase/auth\";\nimport { child, remove, set } from \"firebase/database\";\nimport { memo, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { auth, onlineUsersRef } from \"../../modules/firebase-config\";\nimport { myRoomRef } from \"../../store/GameState\";\n\n\nconst Login = () => {\n   const isLoggedIn = useSelector((state) => state.userInfo.isLoggedIn);\n   const [usernameInput, setUsernameInput] = useState(\"\");\n   const loginHandler = async (event) => {\n      event.preventDefault();\n      await signInAnonymously(auth);\n      set(child(onlineUsersRef, auth.currentUser.uid), {username:usernameInput,inRoom:false});\n      setUsernameInput(\"\");\n\n   };\n\n   const logoutHandler = async () => {\n      remove(child(onlineUsersRef, auth.currentUser.uid));\n      if(myRoomRef){\n         remove(myRoomRef)\n      }\n      \n      signOut(auth);\n   };\n\n   if (!isLoggedIn) {\n      return (\n         <form onSubmit={loginHandler}>\n            <label id=\"name\">Username: </label>\n            <input\n               id=\"name\"\n               value={usernameInput}\n               onChange={(event) => {\n                  setUsernameInput(event.target.value);\n               }}\n            ></input>\n            <button>Login</button>\n         </form>\n      );\n   } else {\n      return <button onClick={logoutHandler}>Logout</button>;\n   }\n};\nexport default memo(Login);\n"],"mappings":"uVAAA,OAASA,iBAAT,CAA4BC,OAA5B,KAA2C,eAA3C,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,GAAxB,KAAmC,mBAAnC,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,OAA/B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,IAAT,CAAeC,cAAf,KAAqC,+BAArC,CACA,OAASC,SAAT,KAA0B,uBAA1B,C,wFAGA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CACjB,GAAMC,WAAU,CAAGL,WAAW,CAAC,SAACM,KAAD,QAAWA,MAAK,CAACC,QAAN,CAAeF,UAA1B,EAAD,CAA9B,CACA,cAA0CN,QAAQ,CAAC,EAAD,CAAlD,wCAAOS,aAAP,eAAsBC,gBAAtB,eACA,GAAMC,aAAY,4FAAG,iBAAOC,KAAP,oHAClBA,KAAK,CAACC,cAAN,GADkB,sBAEZnB,kBAAiB,CAACQ,IAAD,CAFL,QAGlBJ,GAAG,CAACF,KAAK,CAACO,cAAD,CAAiBD,IAAI,CAACY,WAAL,CAAiBC,GAAlC,CAAN,CAA8C,CAACC,QAAQ,CAACP,aAAV,CAAwBQ,MAAM,CAAC,KAA/B,CAA9C,CAAH,CACAP,gBAAgB,CAAC,EAAD,CAAhB,CAJkB,sDAAH,kBAAZC,aAAY,4CAAlB,CAQA,GAAMO,cAAa,6FAAG,0IACnBrB,MAAM,CAACD,KAAK,CAACO,cAAD,CAAiBD,IAAI,CAACY,WAAL,CAAiBC,GAAlC,CAAN,CAAN,CACA,GAAGX,SAAH,CAAa,CACVP,MAAM,CAACO,SAAD,CAAN,CACF,CAEDT,OAAO,CAACO,IAAD,CAAP,CANmB,wDAAH,kBAAbgB,cAAa,2CAAnB,CASA,GAAI,CAACZ,UAAL,CAAiB,CACd,mBACG,cAAM,QAAQ,CAAEK,YAAhB,wBACG,cAAO,EAAE,CAAC,MAAV,wBADH,cAEG,cACG,EAAE,CAAC,MADN,CAEG,KAAK,CAAEF,aAFV,CAGG,QAAQ,CAAE,kBAACG,KAAD,CAAW,CAClBF,gBAAgB,CAACE,KAAK,CAACO,MAAN,CAAaC,KAAd,CAAhB,CACF,CALJ,EAFH,cASG,iCATH,GADH,CAaF,CAdD,IAcO,CACJ,mBAAO,eAAQ,OAAO,CAAEF,aAAjB,oBAAP,CACF,CACH,CArCD,CAsCA,2BAAenB,IAAI,CAACM,KAAD,CAAnB"},"metadata":{},"sourceType":"module"}