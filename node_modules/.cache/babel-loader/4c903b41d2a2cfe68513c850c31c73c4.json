{"ast":null,"code":"import _slicedToArray from\"/Users/albert/Desktop/-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{onAuthStateChanged}from\"@firebase/auth\";import{off,remove}from\"@firebase/database\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import KeyBindings from\"./Components/KeyBindings/KeyBindings\";import{auth}from\"./modules/firebase-config\";import SinglePlayer from\"./Pages/SinglePlayer\";import TwoPlayer from\"./Pages/TwoPlayer\";import{gameStateActions}from\"./store/GameState\";import{gameStateActions2,myRoomRef}from\"./store/GameState2\";import{opponentRef,userInfoActions}from\"./store/UserInfo\";import NavigationBar from\"./Components/UI/NavigationBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();var _useState=useState(/*#__PURE__*/_jsx(SinglePlayer,{})),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showKeyBindings=_useState4[0],setShowKeyBindings=_useState4[1];var changePageHandler=function changePageHandler(pageName){if(pageName===\"singleplayer\"){dispatch(gameStateActions.reset());setPage(/*#__PURE__*/_jsx(SinglePlayer,{}));}else if(pageName===\"two-player\"){if(myRoomRef){remove(myRoomRef);}dispatch(gameStateActions2.reset());setPage(/*#__PURE__*/_jsx(TwoPlayer,{}));}};onAuthStateChanged(auth,function(user){if(user){dispatch(userInfoActions.login());dispatch(userInfoActions.reset());dispatch(userInfoActions.setRoomStatus(\"looking for room\"));}else{dispatch(userInfoActions.logout());if(opponentRef){off(opponentRef);}dispatch(userInfoActions.reset());}});return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(NavigationBar,{setPage:changePageHandler,setShowKeyBindings:setShowKeyBindings}),page,showKeyBindings&&/*#__PURE__*/_jsx(KeyBindings,{setShowKeyBindings:setShowKeyBindings})]});};export default App;","map":{"version":3,"names":["onAuthStateChanged","off","remove","React","useState","useDispatch","KeyBindings","auth","SinglePlayer","TwoPlayer","gameStateActions","gameStateActions2","myRoomRef","opponentRef","userInfoActions","NavigationBar","App","dispatch","page","setPage","showKeyBindings","setShowKeyBindings","changePageHandler","pageName","reset","user","login","setRoomStatus","logout"],"sources":["/Users/albert/Desktop/-/src/App.js"],"sourcesContent":["import { onAuthStateChanged } from \"@firebase/auth\";\nimport { off, remove} from \"@firebase/database\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport KeyBindings from \"./Components/KeyBindings/KeyBindings\";\nimport { auth } from \"./modules/firebase-config\";\nimport SinglePlayer from \"./Pages/SinglePlayer\";\nimport TwoPlayer from \"./Pages/TwoPlayer\";\nimport { gameStateActions } from \"./store/GameState\";\nimport { gameStateActions2, myRoomRef } from \"./store/GameState2\";\nimport { opponentRef, userInfoActions } from \"./store/UserInfo\";\nimport NavigationBar from \"./Components/UI/NavigationBar\";\n\nconst App = () => {\n   const dispatch = useDispatch();\n   const [page, setPage] = useState(<SinglePlayer></SinglePlayer>);\n   const [showKeyBindings,setShowKeyBindings] = useState(false)\n   const changePageHandler = (pageName) => {\n      if (pageName === \"singleplayer\") {\n         dispatch(gameStateActions.reset());\n         setPage(<SinglePlayer></SinglePlayer>);\n      } else if (pageName === \"two-player\") {\n         if(myRoomRef){\n            remove(myRoomRef)\n         }\n         dispatch(gameStateActions2.reset())\n         setPage(<TwoPlayer></TwoPlayer>);\n      }\n   };\n\n   onAuthStateChanged(auth, (user) => {\n      if (user) {\n         dispatch(userInfoActions.login());\n         dispatch(userInfoActions.reset())\n         dispatch(userInfoActions.setRoomStatus(\"looking for room\"))\n\n      } else {\n         dispatch(userInfoActions.logout());\n         if(opponentRef){\n            off(opponentRef)\n         }\n         dispatch(userInfoActions.reset())\n      }\n   });\n\n\n\n\n   return (\n      <React.Fragment>\n         <NavigationBar setPage={changePageHandler} setShowKeyBindings={setShowKeyBindings}></NavigationBar>\n         {page}\n         {showKeyBindings&&<KeyBindings setShowKeyBindings={setShowKeyBindings}></KeyBindings>}\n      </React.Fragment>\n   );\n};\nexport default App;\n"],"mappings":"6GAAA,OAASA,kBAAT,KAAmC,gBAAnC,CACA,OAASC,GAAT,CAAcC,MAAd,KAA2B,oBAA3B,CACA,MAAOC,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,YAAP,KAAwB,sCAAxB,CACA,OAASC,IAAT,KAAqB,2BAArB,CACA,MAAOC,aAAP,KAAyB,sBAAzB,CACA,MAAOC,UAAP,KAAsB,mBAAtB,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,OAASC,iBAAT,CAA4BC,SAA5B,KAA6C,oBAA7C,CACA,OAASC,WAAT,CAAsBC,eAAtB,KAA6C,kBAA7C,CACA,MAAOC,cAAP,KAA0B,+BAA1B,C,wFAEA,GAAMC,IAAG,CAAG,QAANA,IAAM,EAAM,CACf,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CACA,cAAwBD,QAAQ,cAAC,KAAC,YAAD,IAAD,CAAhC,wCAAOc,IAAP,eAAaC,OAAb,eACA,eAA6Cf,QAAQ,CAAC,KAAD,CAArD,yCAAOgB,eAAP,eAAuBC,kBAAvB,eACA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,QAAD,CAAc,CACrC,GAAIA,QAAQ,GAAK,cAAjB,CAAiC,CAC9BN,QAAQ,CAACP,gBAAgB,CAACc,KAAjB,EAAD,CAAR,CACAL,OAAO,cAAC,KAAC,YAAD,IAAD,CAAP,CACF,CAHD,IAGO,IAAII,QAAQ,GAAK,YAAjB,CAA+B,CACnC,GAAGX,SAAH,CAAa,CACVV,MAAM,CAACU,SAAD,CAAN,CACF,CACDK,QAAQ,CAACN,iBAAiB,CAACa,KAAlB,EAAD,CAAR,CACAL,OAAO,cAAC,KAAC,SAAD,IAAD,CAAP,CACF,CACH,CAXD,CAaAnB,kBAAkB,CAACO,IAAD,CAAO,SAACkB,IAAD,CAAU,CAChC,GAAIA,IAAJ,CAAU,CACPR,QAAQ,CAACH,eAAe,CAACY,KAAhB,EAAD,CAAR,CACAT,QAAQ,CAACH,eAAe,CAACU,KAAhB,EAAD,CAAR,CACAP,QAAQ,CAACH,eAAe,CAACa,aAAhB,CAA8B,kBAA9B,CAAD,CAAR,CAEF,CALD,IAKO,CACJV,QAAQ,CAACH,eAAe,CAACc,MAAhB,EAAD,CAAR,CACA,GAAGf,WAAH,CAAe,CACZZ,GAAG,CAACY,WAAD,CAAH,CACF,CACDI,QAAQ,CAACH,eAAe,CAACU,KAAhB,EAAD,CAAR,CACF,CACH,CAbiB,CAAlB,CAkBA,mBACG,MAAC,KAAD,CAAO,QAAP,yBACG,KAAC,aAAD,EAAe,OAAO,CAAEF,iBAAxB,CAA2C,kBAAkB,CAAED,kBAA/D,EADH,CAEIH,IAFJ,CAGIE,eAAe,eAAE,KAAC,WAAD,EAAa,kBAAkB,CAAEC,kBAAjC,EAHrB,GADH,CAOF,CA1CD,CA2CA,cAAeL,IAAf"},"metadata":{},"sourceType":"module"}